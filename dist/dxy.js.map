{"version":3,"file":"dxy.js","sources":["../src/structs/Color.ts","../src/modules/EventObject.ts","../src/materials/Material.ts","../src/structs/Vector3.ts","../src/structs/Matrix4.ts","../src/structs/Matrix3.ts","../src/materials/physical/PhysMaterial.ts","../src/renderer/WebGLConstants.ts","../src/modules/Attribute.ts","../src/modules/Geometry.ts","../src/modules/Texture.ts","../src/structs/Quaternion.ts","../src/objects/TRSObject.ts","../src/objects/Mesh.ts","../src/loaders/GLBLoader.ts","../src/loaders/ImageLoader.ts","../src/structs/Spherical.ts","../src/structs/Vector2.ts","../src/objects/Camera.ts","../src/materials/background/BGMaterial.ts","../src/objects/Light.ts","../src/objects/Scene.ts","../src/renderer/WebGLAttribute.ts","../src/structs/Vector4.ts","../src/renderer/WebGLUniform.ts","../src/renderer/WebGLCache.ts","../src/renderer/WebGLState.ts","../src/renderer/WebGL.ts","../src/Dxy.ts"],"sourcesContent":["import { Vector3 } from \"./Vector3\";\r\n\r\nclass ColorHelper {\r\n\r\n    public static fromStyle(style: string): number[] {\r\n\r\n        let execArray: RegExpExecArray | null;\r\n\r\n        if (execArray = /^(\\w+)\\(([^\\)]*)\\)/.exec(style)) {\r\n\r\n            return ColorHelper.fromRGB(execArray);\r\n\r\n        }\r\n\r\n        if (execArray = /^\\#([A-Fa-f\\d]+)$/.exec(style)) {\r\n\r\n            return ColorHelper.fromHex(execArray);\r\n\r\n        }\r\n\r\n        return [0, 0, 0];\r\n\r\n    }\r\n\r\n    public static fromRGB(array: RegExpExecArray): number[] {\r\n\r\n        const name = array[1];\r\n        const result = [0, 0, 0];\r\n\r\n        if (name === 'rgb' || name === 'rgba') {\r\n\r\n            const components = array[2];\r\n            let color: RegExpExecArray | null;\r\n\r\n            if (color = /^\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec(components)) {\r\n\r\n                // rgb(255, 0, 0) rgba(255, 0, 0, 0.5)\r\n\r\n                result[0] = Math.min(255, parseInt(color[1], 10)) / 255;\r\n                result[1] = Math.min(255, parseInt(color[2], 10)) / 255;\r\n                result[2] = Math.min(255, parseInt(color[3], 10)) / 255;\r\n\r\n            }\r\n\r\n            if (color = /^\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec(components)) {\r\n\r\n                // rgb(100%, 0%, 0%) rgba(100%, 0%, 0%, 0.5)\r\n\r\n                result[0] = Math.min(100, parseInt(color[1], 10)) / 100;\r\n                result[1] = Math.min(100, parseInt(color[2], 10)) / 100;\r\n                result[2] = Math.min(100, parseInt(color[3], 10)) / 100;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        return result;\r\n\r\n    }\r\n\r\n    public static fromHex(array: RegExpExecArray): number[] {\r\n\r\n        const hex = array[1];\r\n        const size = hex.length;\r\n\r\n        const result = [0, 0, 0];\r\n\r\n        if (size === 3) {\r\n\r\n            // #ff0\r\n\r\n            result[0] = parseInt(hex.charAt(0), 16) / 15;\r\n            result[1] = parseInt(hex.charAt(1), 16) / 15;\r\n            result[2] = parseInt(hex.charAt(2), 16) / 15;\r\n\r\n        } else if (size === 6) {\r\n\r\n            // #ff0000\r\n\r\n            const h = parseInt(hex, 16);\r\n\r\n            result[0] = (h >> 16 & 255) / 255;\r\n            result[1] = (h >> 8 & 255) / 255;\r\n            result[2] = (h & 255) / 255;\r\n\r\n        }\r\n\r\n        return result;\r\n\r\n    }\r\n\r\n    public static SRGBToLinear(c: number): number {\r\n\r\n        return (c < 0.04045) ? c * 0.0773993808 : Math.pow(c * 0.9478672986 + 0.0521327014, 2.4);\r\n\r\n    }\r\n\r\n}\r\n\r\nexport class Color {\r\n\r\n    public constructor(\r\n\r\n        public r = 1,\r\n        public g = 1,\r\n        public b = 1,\r\n\r\n    ) { }\r\n\r\n    public set(r: number, g: number, b: number): Color {\r\n\r\n        this.r = ColorHelper.SRGBToLinear(r);\r\n        this.g = ColorHelper.SRGBToLinear(g);\r\n        this.b = ColorHelper.SRGBToLinear(b);\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public setStyle(style: string): Color {\r\n\r\n        const [r, g, b] = ColorHelper.fromStyle(style);\r\n\r\n        this.set(r, g, b);\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public copy(color: Color): Color {\r\n\r\n        this.r = color.r;\r\n        this.g = color.g;\r\n        this.b = color.b;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public setFromArray(array: number[], offset = 0): Color {\r\n\r\n        this.r = array[offset];\r\n        this.g = array[offset + 1];\r\n        this.b = array[offset + 2];\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public multiplyScalar(scalar: number): Color {\r\n\r\n        this.r *= scalar;\r\n        this.g *= scalar;\r\n        this.b *= scalar;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public toVector3(target: Vector3): Vector3 {\r\n\r\n        target.x = this.r;\r\n        target.y = this.g;\r\n        target.z = this.b;\r\n\r\n        return target;\r\n\r\n    }\r\n\r\n}","export type EventParameters = {\r\n\r\n    source?: EventObject;\r\n    [propName: string]: any;\r\n\r\n}\r\n\r\nexport class EventObject {\r\n\r\n    declare private handlers: Map<string, Map<Function, Object>> | undefined;\r\n\r\n    public on(eventName: string, handler: Function, scope: object): void {\r\n\r\n        if (!this.handlers) {\r\n\r\n            this.handlers = new Map<string, Map<Function, object>>();\r\n\r\n        }\r\n\r\n        let handlers = this.handlers.get(eventName);\r\n\r\n        if (!handlers) {\r\n\r\n            handlers = new Map<Function, object>();\r\n            this.handlers.set(eventName, handlers);\r\n\r\n        }\r\n\r\n        handlers.set(handler, scope);\r\n\r\n    }\r\n\r\n    public off(eventName: string, handler: Function): void {\r\n\r\n        if (!this.handlers) {\r\n\r\n            return;\r\n\r\n        }\r\n\r\n        const handlers = this.handlers.get(eventName);\r\n\r\n        if (handlers) {\r\n\r\n            handlers.delete(handler);\r\n\r\n        }\r\n\r\n    }\r\n\r\n    public emit(eventName: string, parameters: EventParameters = {}): void {\r\n\r\n        if (!this.handlers) {\r\n\r\n            return;\r\n\r\n        }\r\n\r\n        const handlers = this.handlers.get(eventName);\r\n\r\n        if (handlers) {\r\n\r\n            parameters.source = this;\r\n\r\n            const entries = handlers.entries(); // 防止在迭代过程中列表变化引起报错\r\n\r\n            for (const [handler, scope] of entries) {\r\n\r\n                handler.call(scope, parameters);\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n}","import { EventObject } from \"../modules/EventObject\";\r\nimport { Mesh } from \"../objects/Mesh\";\r\nimport { Camera } from \"../objects/Camera\";\r\nimport { Scene } from \"../objects/Scene\";\r\n\r\nexport interface IUniform<T = any> {\r\n\r\n    value: T\r\n\r\n}\r\n\r\nexport abstract class Material extends EventObject {\r\n\r\n    public readonly uniforms: { [key: string]: IUniform; } = {};\r\n\r\n    public name = '';\r\n\r\n    public transparent = false;\r\n\r\n    // public depthTest = true;\r\n    public backfaceCulling = true;\r\n\r\n    public vertexShader = '';\r\n    public fragmentShader = '';\r\n\r\n    public setUniform(name: string, value: any): Material {\r\n\r\n        this.uniforms[name] = { value: value };\r\n        return this;\r\n\r\n    }\r\n\r\n    public getUniform(name: string): IUniform | undefined {\r\n\r\n        return this.uniforms[name];\r\n\r\n    }\r\n\r\n    public onBeforRender(scene: Scene, mesh: Mesh, camera: Camera): void { }\r\n\r\n    public dispose(): void {\r\n\r\n        this.emit('dispose');\r\n\r\n    }\r\n\r\n}","import { Matrix3 } from \"./Matrix3\";\r\nimport { Matrix4 } from \"./Matrix4\";\r\n\r\nexport class Vector3 {\r\n\r\n    public constructor(\r\n\r\n        public x = 0,\r\n        public y = 0,\r\n        public z = 0,\r\n\r\n    ) { }\r\n\r\n    public set(x: number, y: number, z: number): Vector3 {\r\n\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public copy(v: Vector3): Vector3 {\r\n\r\n        this.x = v.x;\r\n        this.y = v.y;\r\n        this.z = v.z;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public setScalar(scalar: number): Vector3 {\r\n\r\n        this.x = scalar;\r\n        this.y = scalar;\r\n        this.z = scalar;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public setFromArray(array: number[], offset = 0): Vector3 {\r\n\r\n        this.x = array[offset];\r\n        this.y = array[offset + 1];\r\n        this.z = array[offset + 2];\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public setFromMatrix4(m: Matrix4): Vector3 {\r\n\r\n        this.x = m.elements[12];\r\n        this.y = m.elements[13];\r\n        this.z = m.elements[14];\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public add(right: Vector3): Vector3 {\r\n\r\n        this.x += right.x;\r\n        this.y += right.y;\r\n        this.z += right.z;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public sub(v: Vector3): Vector3 {\r\n\r\n        return this.subVectors(this, v);\r\n\r\n    }\r\n\r\n    public subVectors(l: Vector3, r: Vector3): Vector3 {\r\n\r\n        this.x = l.x - r.x;\r\n        this.y = l.y - r.y;\r\n        this.z = l.z - r.z;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public multiplyScalar(scalar: number): Vector3 {\r\n\r\n        this.x *= scalar;\r\n        this.y *= scalar;\r\n        this.z *= scalar;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public applyMatrix3(m: Matrix3): Vector3 {\r\n\r\n        const x = this.x;\r\n        const y = this.y;\r\n        const z = this.z;\r\n\r\n        const me = m.elements;\r\n\r\n        this.x = x * me[0] + y * me[3] + z * me[6];\r\n        this.y = x * me[1] + y * me[4] + z * me[7];\r\n        this.z = x * me[2] + y * me[5] + z * me[8];\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public applyMatrix4(m: Matrix4): Vector3 {\r\n\r\n        const x = this.x;\r\n        const y = this.y;\r\n        const z = this.z;\r\n        const e = m.elements;\r\n\r\n        const w = 1 / (e[3] * x + e[7] * y + e[11] * z + e[15]);\r\n\r\n        this.x = (e[0] * x + e[4] * y + e[8] * z + e[12]) * w;\r\n        this.y = (e[1] * x + e[5] * y + e[9] * z + e[13]) * w;\r\n        this.z = (e[2] * x + e[6] * y + e[10] * z + e[14]) * w;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public equals(v: Vector3): boolean {\r\n\r\n        return v.x === this.x && v.y === this.y && v.z === this.z;\r\n\r\n    }\r\n\r\n    public crossVectors(l: Vector3, r: Vector3): Vector3 {\r\n\r\n        this.x = l.y * r.z - l.z * r.y;\r\n        this.y = l.z * r.x - l.x * r.z;\r\n        this.z = l.x * r.y - l.y * r.x;\r\n\r\n        return this;\r\n    }\r\n\r\n    public lengthSq(): number {\r\n\r\n        return this.x * this.x + this.y * this.y + this.z * this.z;\r\n\r\n    }\r\n\r\n    public length(): number {\r\n\r\n        return Math.sqrt(this.lengthSq());\r\n\r\n    }\r\n\r\n    public normalize(): Vector3 {\r\n\r\n        return this.multiplyScalar(1 / (this.length() || 1));\r\n\r\n    }\r\n\r\n    public distanceTo(v: Vector3): number {\r\n\r\n        const dx = this.x - v.x;\r\n        const dy = this.y - v.y;\r\n        const dz = this.z - v.z;\r\n\r\n        return Math.sqrt(dx * dx + dy * dy + dz * dz);\r\n\r\n    }\r\n\r\n}","import { Quaternion } from \"./Quaternion\";\r\nimport { Vector3 } from \"./Vector3\";\r\n\r\nclass Instances {\r\n\r\n    public static readonly up = new Vector3(0, 1, 0);\r\n    public static readonly x = new Vector3(0, 1, 0);\r\n    public static readonly y = new Vector3(0, 1, 0);\r\n    public static readonly z = new Vector3(0, 1, 0);\r\n\r\n}\r\n\r\nexport class Matrix4 {\r\n\r\n    public constructor(\r\n\r\n        public readonly elements = [\r\n\r\n            1, 0, 0, 0,\r\n            0, 1, 0, 0,\r\n            0, 0, 1, 0,\r\n            0, 0, 0, 1,\r\n\r\n        ]\r\n\r\n    ) { }\r\n\r\n    public set(\r\n\r\n        n11: number, n12: number, n13: number, n14: number,\r\n        n21: number, n22: number, n23: number, n24: number,\r\n        n31: number, n32: number, n33: number, n34: number,\r\n        n41: number, n42: number, n43: number, n44: number,\r\n\r\n    ): Matrix4 {\r\n\r\n        this.elements[0] = n11;\r\n        this.elements[1] = n12;\r\n        this.elements[2] = n13;\r\n        this.elements[3] = n14;\r\n\r\n        this.elements[4] = n21;\r\n        this.elements[5] = n22;\r\n        this.elements[6] = n23;\r\n        this.elements[7] = n24;\r\n\r\n        this.elements[8] = n31;\r\n        this.elements[9] = n32;\r\n        this.elements[10] = n33;\r\n        this.elements[11] = n34;\r\n\r\n        this.elements[12] = n41; //tx\r\n        this.elements[13] = n42; //ty\r\n        this.elements[14] = n43; //tz\r\n        this.elements[15] = n44;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public copy(m: Matrix4): Matrix4 {\r\n\r\n        this.elements.length = 0;\r\n        this.elements.push(...m.elements);\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public multiply(right: Matrix4): Matrix4 {\r\n\r\n        return this.multiplyMatrices(this, right);\r\n\r\n    }\r\n\r\n    public multiplyMatrices(left: Matrix4, right: Matrix4): Matrix4 {\r\n\r\n        /** this = left * right , left 在左 , right 在右 */\r\n\r\n        const le = left.elements.slice();\r\n        const re = right.elements.slice();\r\n\r\n        this.elements[0] = le[0] * re[0] + le[1] * re[4] + le[2] * re[8] + le[3] * re[12];\r\n        this.elements[1] = le[0] * re[1] + le[1] * re[5] + le[2] * re[9] + le[3] * re[13];\r\n        this.elements[2] = le[0] * re[2] + le[1] * re[6] + le[2] * re[10] + le[3] * re[14];\r\n        this.elements[3] = le[0] * re[3] + le[1] * re[7] + le[2] * re[11] + le[3] * re[15];\r\n\r\n        this.elements[4] = le[4] * re[0] + le[5] * re[4] + le[6] * re[8] + le[7] * re[12];\r\n        this.elements[5] = le[4] * re[1] + le[5] * re[5] + le[6] * re[9] + le[7] * re[13];\r\n        this.elements[6] = le[4] * re[2] + le[5] * re[6] + le[6] * re[10] + le[7] * re[14];\r\n        this.elements[7] = le[4] * re[3] + le[5] * re[7] + le[6] * re[11] + le[7] * re[15];\r\n\r\n        this.elements[8] = le[8] * re[0] + le[9] * re[4] + le[10] * re[8] + le[11] * re[12];\r\n        this.elements[9] = le[8] * re[1] + le[9] * re[5] + le[10] * re[9] + le[11] * re[13];\r\n        this.elements[10] = le[8] * re[2] + le[9] * re[6] + le[10] * re[10] + le[11] * re[14];\r\n        this.elements[11] = le[8] * re[3] + le[9] * re[7] + le[10] * re[11] + le[11] * re[15];\r\n\r\n        this.elements[12] = le[12] * re[0] + le[13] * re[4] + le[14] * re[8] + le[15] * re[12];\r\n        this.elements[13] = le[12] * re[1] + le[13] * re[5] + le[14] * re[9] + le[15] * re[13];\r\n        this.elements[14] = le[12] * re[2] + le[13] * re[6] + le[14] * re[10] + le[15] * re[14];\r\n        this.elements[15] = le[12] * re[3] + le[13] * re[7] + le[14] * re[11] + le[15] * re[15];\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public compose(position: Vector3, rotation: Quaternion, scale: Vector3): Matrix4 {\r\n\r\n        /** \r\n         * \r\n         * 在四元数旋转矩阵的基础上\r\n         * 再叠加缩放值到对应元素中\r\n         * 再设置平移值到对应元素中\r\n         * \r\n         */\r\n\r\n        const te = this.elements;\r\n\r\n        const x = rotation.x;\r\n        const y = rotation.y;\r\n        const z = rotation.z;\r\n        const w = rotation.w;\r\n\r\n        const x2 = x + x;\r\n        const y2 = y + y;\r\n        const z2 = z + z;\r\n\r\n        const xx = x * x2;\r\n        const xy = x * y2;\r\n        const xz = x * z2;\r\n        const yy = y * y2;\r\n        const yz = y * z2;\r\n        const zz = z * z2;\r\n        const wx = w * x2;\r\n        const wy = w * y2;\r\n        const wz = w * z2;\r\n\r\n        const sx = scale.x;\r\n        const sy = scale.y;\r\n        const sz = scale.z;\r\n\r\n        te[0] = (1 - (yy + zz)) * sx;\r\n        te[1] = (xy + wz) * sx;\r\n        te[2] = (xz - wy) * sx;\r\n        te[3] = 0;\r\n\r\n        te[4] = (xy - wz) * sy;\r\n        te[5] = (1 - (xx + zz)) * sy;\r\n        te[6] = (yz + wx) * sy;\r\n        te[7] = 0;\r\n\r\n        te[8] = (xz + wy) * sz;\r\n        te[9] = (yz - wx) * sz;\r\n        te[10] = (1 - (xx + yy)) * sz;\r\n        te[11] = 0;\r\n\r\n        te[12] = position.x;\r\n        te[13] = position.y;\r\n        te[14] = position.z;\r\n        te[15] = 1;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public invert(): Matrix4 {\r\n\r\n        /**\r\n         *\r\n         * 经典伴随矩阵求逆\r\n         *\r\n         * 先计算所有元素的余子式值\r\n         * 然后余子式值组成的矩阵再转置\r\n         * 再除以矩阵的行列式的值\r\n         *\r\n         * 注意：以扩展形式的矩阵行列式求值\r\n         *\r\n         */\r\n\r\n        const te = this.elements;\r\n\r\n        const n11 = te[0], n12 = te[1], n13 = te[2], n14 = te[3];\r\n        const n21 = te[4], n22 = te[5], n23 = te[6], n24 = te[7];\r\n        const n31 = te[8], n32 = te[9], n33 = te[10], n34 = te[11];\r\n        const n41 = te[12], n42 = te[13], n43 = te[14], n44 = te[15];\r\n\r\n        const t11 = n32 * n43 * n24 - n42 * n33 * n24 + n42 * n23 * n34 - n22 * n43 * n34 - n32 * n23 * n44 + n22 * n33 * n44;\r\n        const t12 = n41 * n33 * n24 - n31 * n43 * n24 - n41 * n23 * n34 + n21 * n43 * n34 + n31 * n23 * n44 - n21 * n33 * n44;\r\n        const t13 = n31 * n42 * n24 - n41 * n32 * n24 + n41 * n22 * n34 - n21 * n42 * n34 - n31 * n22 * n44 + n21 * n32 * n44;\r\n        const t14 = n41 * n32 * n23 - n31 * n42 * n23 - n41 * n22 * n33 + n21 * n42 * n33 + n31 * n22 * n43 - n21 * n32 * n43;\r\n\r\n        const det = n11 * t11 + n12 * t12 + n13 * t13 + n14 * t14;\r\n\r\n        if (det === 0) return this.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);\r\n\r\n        const detInv = 1 / det;\r\n\r\n        te[0] = t11 * detInv;\r\n        te[1] = (n42 * n33 * n14 - n32 * n43 * n14 - n42 * n13 * n34 + n12 * n43 * n34 + n32 * n13 * n44 - n12 * n33 * n44) * detInv;\r\n        te[2] = (n22 * n43 * n14 - n42 * n23 * n14 + n42 * n13 * n24 - n12 * n43 * n24 - n22 * n13 * n44 + n12 * n23 * n44) * detInv;\r\n        te[3] = (n32 * n23 * n14 - n22 * n33 * n14 - n32 * n13 * n24 + n12 * n33 * n24 + n22 * n13 * n34 - n12 * n23 * n34) * detInv;\r\n\r\n        te[4] = t12 * detInv;\r\n        te[5] = (n31 * n43 * n14 - n41 * n33 * n14 + n41 * n13 * n34 - n11 * n43 * n34 - n31 * n13 * n44 + n11 * n33 * n44) * detInv;\r\n        te[6] = (n41 * n23 * n14 - n21 * n43 * n14 - n41 * n13 * n24 + n11 * n43 * n24 + n21 * n13 * n44 - n11 * n23 * n44) * detInv;\r\n        te[7] = (n21 * n33 * n14 - n31 * n23 * n14 + n31 * n13 * n24 - n11 * n33 * n24 - n21 * n13 * n34 + n11 * n23 * n34) * detInv;\r\n\r\n        te[8] = t13 * detInv;\r\n        te[9] = (n41 * n32 * n14 - n31 * n42 * n14 - n41 * n12 * n34 + n11 * n42 * n34 + n31 * n12 * n44 - n11 * n32 * n44) * detInv;\r\n        te[10] = (n21 * n42 * n14 - n41 * n22 * n14 + n41 * n12 * n24 - n11 * n42 * n24 - n21 * n12 * n44 + n11 * n22 * n44) * detInv;\r\n        te[11] = (n31 * n22 * n14 - n21 * n32 * n14 - n31 * n12 * n24 + n11 * n32 * n24 + n21 * n12 * n34 - n11 * n22 * n34) * detInv;\r\n\r\n        te[12] = t14 * detInv;\r\n        te[13] = (n31 * n42 * n13 - n41 * n32 * n13 + n41 * n12 * n33 - n11 * n42 * n33 - n31 * n12 * n43 + n11 * n32 * n43) * detInv;\r\n        te[14] = (n41 * n22 * n13 - n21 * n42 * n13 - n41 * n12 * n23 + n11 * n42 * n23 + n21 * n12 * n43 - n11 * n22 * n43) * detInv;\r\n        te[15] = (n21 * n32 * n13 - n31 * n22 * n13 + n31 * n12 * n23 - n11 * n32 * n23 - n21 * n12 * n33 + n11 * n22 * n33) * detInv;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public determinant(): number {\r\n\r\n        /* 以扩展形式的矩阵行列式求值 */\r\n\r\n        const te = this.elements;\r\n\r\n        const n11 = te[0], n21 = te[1], n31 = te[2], n41 = te[3];\r\n\r\n        const n12 = te[4], n22 = te[5], n32 = te[6], n42 = te[7];\r\n\r\n        const n13 = te[8], n23 = te[9], n33 = te[10], n43 = te[11];\r\n\r\n        const n14 = te[12], n24 = te[13], n34 = te[14], n44 = te[15];\r\n\r\n        return (\r\n\r\n            n41 * (\r\n\r\n                +n14 * n23 * n32 -\r\n                n13 * n24 * n32 -\r\n                n14 * n22 * n33 +\r\n                n12 * n24 * n33 +\r\n                n13 * n22 * n34 -\r\n                n12 * n23 * n34\r\n\r\n            )\r\n\r\n            +\r\n\r\n            n42 * (\r\n\r\n                +n11 * n23 * n34 -\r\n                n11 * n24 * n33 +\r\n                n14 * n21 * n33 -\r\n                n13 * n21 * n34 +\r\n                n13 * n24 * n31 -\r\n                n14 * n23 * n31\r\n\r\n            )\r\n\r\n            +\r\n\r\n            n43 * (\r\n\r\n                +n11 * n24 * n32 -\r\n                n11 * n22 * n34 -\r\n                n14 * n21 * n32 +\r\n                n12 * n21 * n34 +\r\n                n14 * n22 * n31 -\r\n                n12 * n24 * n31\r\n\r\n            )\r\n\r\n            +\r\n\r\n            n44 * (\r\n\r\n                -n13 * n22 * n31 -\r\n                n11 * n23 * n32 +\r\n                n11 * n22 * n33 +\r\n                n13 * n21 * n32 -\r\n                n12 * n21 * n33 +\r\n                n12 * n23 * n31\r\n\r\n            )\r\n\r\n        );\r\n\r\n    }\r\n\r\n    public makePerspective(left: number, right: number, top: number, bottom: number, near: number, far: number): Matrix4 {\r\n\r\n        /**\r\n         * \r\n         * 计算透视投影矩阵\r\n         * \r\n         * 先将平头锥体计算为正方体\r\n         * \t\t使用 near 范围的 left, right, top, bottom\r\n         * \t\t计算线性到 far 范围内的 xy 平面上的缩放\r\n         * \r\n         * 再将正方体缩放到 -1 到 1 范围内\r\n         * \r\n         */\r\n\r\n        const te = this.elements;\r\n\r\n        const x = (2 * near) / (right - left);\r\n        const y = (2 * near) / (top - bottom);\r\n\r\n        const a = (right + left) / (right - left);\r\n        const b = (top + bottom) / (top - bottom);\r\n        const c = -(far + near) / (far - near);\r\n        const d = (-2 * far * near) / (far - near);\r\n\r\n        te[0] = x, te[1] = 0, te[2] = 0, te[3] = 0;\r\n        te[4] = 0, te[5] = y, te[6] = 0, te[7] = 0;\r\n        te[8] = a, te[9] = b, te[10] = c, te[11] = -1;\r\n        te[12] = 0, te[13] = 0, te[14] = d, te[15] = 0;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public makeLookAt(eye: Vector3, target: Vector3): Matrix4 {\r\n\r\n        /** 基轴组成旋转矩阵 */\r\n\r\n        Instances.z.subVectors(eye, target);\r\n\r\n        if (!Instances.z.length()) {\r\n\r\n            Instances.z.z = 1;\r\n\r\n        }\r\n\r\n        Instances.z.normalize();\r\n        Instances.x.crossVectors(Instances.up, Instances.z);\r\n\r\n        if (!Instances.x.lengthSq()) {\r\n\r\n            Instances.z.z += 0.0001;\r\n\r\n            Instances.z.normalize();\r\n            Instances.x.crossVectors(Instances.up, Instances.z);\r\n\r\n        }\r\n\r\n        Instances.x.normalize();\r\n        Instances.y.crossVectors(Instances.z, Instances.x);\r\n\r\n        this.elements[0] = Instances.x.x;\r\n        this.elements[1] = Instances.x.y;\r\n        this.elements[2] = Instances.x.z;\r\n\r\n        this.elements[4] = Instances.y.x;\r\n        this.elements[5] = Instances.y.y;\r\n        this.elements[6] = Instances.y.z;\r\n\r\n        this.elements[8] = Instances.z.x;\r\n        this.elements[9] = Instances.z.y;\r\n        this.elements[10] = Instances.z.z;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public equals(m: Matrix4): boolean {\r\n\r\n        const te = this.elements;\r\n        const me = m.elements;\r\n\r\n        for (let ii = 0; ii < 16; ii++) {\r\n\r\n            if (te[ii] !== me[ii]) {\r\n\r\n                return false;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n}","import { Matrix4 } from \"./Matrix4\";\r\n\r\nexport class Matrix3 {\r\n\r\n    public constructor(\r\n\r\n        public readonly elements = [\r\n\r\n            1, 0, 0,\r\n            0, 1, 0,\r\n            0, 0, 1,\r\n\r\n        ]\r\n\r\n    ) { }\r\n\r\n    public set(\r\n\r\n        n11: number, n12: number, n13: number,\r\n        n21: number, n22: number, n23: number,\r\n        n31: number, n32: number, n33: number,\r\n\r\n    ): Matrix3 {\r\n\r\n        this.elements[0] = n11;\r\n        this.elements[1] = n12;\r\n        this.elements[2] = n13;\r\n\r\n        this.elements[3] = n21;\r\n        this.elements[4] = n22;\r\n        this.elements[5] = n23;\r\n\r\n        this.elements[6] = n31;\r\n        this.elements[7] = n32;\r\n        this.elements[8] = n33;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public copy(m: Matrix3): Matrix3 {\r\n\r\n        this.elements.length = 0;\r\n        this.elements.push(...m.elements);\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public setFromMatrix4(m: Matrix4): Matrix3 {\r\n\r\n        this.elements[0] = m.elements[0];\r\n        this.elements[1] = m.elements[1];\r\n        this.elements[2] = m.elements[2];\r\n\r\n        this.elements[3] = m.elements[4];\r\n        this.elements[4] = m.elements[5];\r\n        this.elements[5] = m.elements[6];\r\n\r\n        this.elements[6] = m.elements[8];\r\n        this.elements[7] = m.elements[9];\r\n        this.elements[8] = m.elements[10];\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public invert(): Matrix3 {\r\n\r\n        /**\r\n         *\r\n         * 经典伴随矩阵求逆\r\n         *\r\n         * 先计算所有元素的余子式值\r\n         * 然后余子式值组成的矩阵再转置\r\n         * 再除以矩阵的行列式的值\r\n         *\r\n         * 注意：以扩展形式的矩阵行列式求值\r\n         *\r\n         */\r\n\r\n        const te = this.elements;\r\n\r\n        const n11 = te[0], n12 = te[1], n13 = te[2];\r\n        const n21 = te[3], n22 = te[4], n23 = te[5];\r\n        const n31 = te[6], n32 = te[7], n33 = te[8];\r\n\r\n        const t11 = n33 * n22 - n23 * n32;\r\n        const t12 = n23 * n31 - n33 * n21;\r\n        const t13 = n32 * n21 - n22 * n31;\r\n\r\n        const det = n11 * t11 + n12 * t12 + n13 * t13;\r\n\r\n        if (det === 0) {\r\n\r\n            return this.set(0, 0, 0, 0, 0, 0, 0, 0, 0);\r\n\r\n        }\r\n\r\n        const detInv = 1 / det;\r\n\r\n        te[0] = t11 * detInv;\r\n        te[1] = (n13 * n32 - n33 * n12) * detInv;\r\n        te[2] = (n23 * n12 - n13 * n22) * detInv;\r\n\r\n        te[3] = t12 * detInv;\r\n        te[4] = (n33 * n11 - n13 * n31) * detInv;\r\n        te[5] = (n13 * n21 - n23 * n11) * detInv;\r\n\r\n        te[6] = t13 * detInv;\r\n        te[7] = (n12 * n31 - n32 * n11) * detInv;\r\n        te[8] = (n22 * n11 - n12 * n21) * detInv;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public transpose(): Matrix3 {\r\n\r\n        /**\r\n         * \r\n         * 0  1  2        0  3  6\r\n         * 3  4  5   ->   1  4  7\r\n         * 6  7  8        2  5  8\r\n         * \r\n         */\r\n\r\n        this.set(\r\n\r\n            this.elements[0], this.elements[3], this.elements[6],\r\n            this.elements[1], this.elements[4], this.elements[7],\r\n            this.elements[2], this.elements[5], this.elements[8],\r\n\r\n        );\r\n\r\n        return this;\r\n    }\r\n\r\n    public makeNormalMatrix(matrix4: Matrix4): Matrix3 {\r\n\r\n        return this.setFromMatrix4(matrix4).invert().transpose();\r\n\r\n    }\r\n\r\n    public equals(m: Matrix3): boolean {\r\n\r\n        const te = this.elements;\r\n        const me = m.elements;\r\n\r\n        for (let ii = 0; ii < 9; ii++) {\r\n\r\n            if (te[ii] !== me[ii]) {\r\n\r\n                return false;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n}","import { Color } from \"../../structs/Color\";\r\nimport { IUniform, Material } from \"../Material\";\r\nimport vertexShader from './vertex.glsl';\r\nimport fragmentShader from './fragment.glsl';\r\nimport { Texture } from \"../../modules/Texture\";\r\nimport { Mesh } from \"../../objects/Mesh\";\r\nimport { Camera } from \"../../objects/Camera\";\r\nimport { Matrix4 } from \"../../structs/Matrix4\";\r\nimport { Matrix3 } from \"../../structs/Matrix3\";\r\nimport { Scene } from \"../../objects/Scene\";\r\nimport { Vector3 } from \"../../structs/Vector3\";\r\n\r\ntype DirectionalLight = {\r\n\r\n    color: Color;\r\n    direction: Vector3;\r\n\r\n}\r\n\r\ntype Uniforms = {\r\n\r\n    opacity: IUniform<number>;\r\n    color: IUniform<Color>;\r\n\r\n    map: IUniform<Texture | undefined>;\r\n    useMap: IUniform<boolean>;\r\n\r\n    roughness: IUniform<number>;\r\n    roughnessMap: IUniform<Texture | undefined>;\r\n    useRoughnessMap: IUniform<boolean>;\r\n\r\n    metalness: IUniform<number>;\r\n    metalnessMap: IUniform<Texture | undefined>;\r\n    useMetalnessMap: IUniform<boolean>;\r\n\r\n    modelViewMatrix: IUniform<Matrix4>;\r\n    normalMatrix: IUniform<Matrix3>;\r\n    projectionMatrix: IUniform<Matrix4>;\r\n\r\n    useNormal: IUniform<boolean>;\r\n    useUV: IUniform<boolean>;\r\n    useColor: IUniform<boolean>;\r\n\r\n    ambientLightColor: IUniform<Color>;\r\n    directionalLight: IUniform<DirectionalLight>;\r\n\r\n}\r\n\r\nexport class PhysMaterial extends Material {\r\n\r\n    declare public uniforms: Uniforms;\r\n\r\n    public opacity = 1;\r\n    public color = new Color(1, 1, 1);\r\n\r\n    public map: Texture | undefined;\r\n\r\n    public roughness = 1;\r\n    public roughnessMap: Texture | undefined;\r\n\r\n    public metalness = 0;\r\n    public metalnessMap: Texture | undefined;\r\n\r\n    public constructor() {\r\n\r\n        super();\r\n\r\n        this.vertexShader = vertexShader;\r\n        this.fragmentShader = fragmentShader;\r\n\r\n        this.initUniforms();\r\n\r\n    }\r\n\r\n    private initUniforms(): void {\r\n\r\n        this.setUniform('color', new Color());\r\n        this.setUniform('opacity', 1);\r\n\r\n        this.setUniform('map', undefined);\r\n        this.setUniform('useMap', false);\r\n\r\n        this.setUniform('roughness', 1);\r\n        this.setUniform('roughnessMap', undefined);\r\n        this.setUniform('useRoughnessMap', false);\r\n\r\n        this.setUniform('metalness', 0);\r\n        this.setUniform('metalnessMap', undefined);\r\n        this.setUniform('useMetalnessMap', false);\r\n\r\n        this.setUniform('modelViewMatrix', new Matrix4());\r\n        this.setUniform('normalMatrix', new Matrix3());\r\n        this.setUniform('projectionMatrix', new Matrix4());\r\n\r\n        this.setUniform('useNormal', false);\r\n        this.setUniform('useUV', false);\r\n        this.setUniform('useColor', false);\r\n\r\n        this.setUniform('ambientLightColor', new Color());\r\n\r\n        this.setUniform('directionalLight', {\r\n            color: new Color(),\r\n            direction: new Vector3(),\r\n        });\r\n\r\n    }\r\n\r\n    public override onBeforRender(scene: Scene, mesh: Mesh, camera: Camera): void {\r\n\r\n        this.uniforms.opacity.value = this.opacity;\r\n        this.uniforms.color.value.copy(this.color);\r\n\r\n        this.uniforms.map.value = this.map;\r\n        this.uniforms.useMap.value = !!this.map;\r\n\r\n        this.uniforms.roughness.value = this.roughness;\r\n        this.uniforms.roughnessMap.value = this.roughnessMap;\r\n        this.uniforms.useRoughnessMap.value = !!this.roughnessMap;\r\n\r\n        this.uniforms.metalness.value = this.metalness;\r\n        this.uniforms.metalnessMap.value = this.metalnessMap;\r\n        this.uniforms.useMetalnessMap.value = !!this.metalnessMap;\r\n\r\n        this.uniforms.modelViewMatrix.value.copy(mesh.modelViewMatrix);\r\n        this.uniforms.normalMatrix.value.copy(mesh.normalMatrix);\r\n        this.uniforms.projectionMatrix.value.copy(camera.projectionMatrix);\r\n\r\n        this.uniforms.useNormal.value = mesh.geometry.hasAttribute('normal');\r\n        this.uniforms.useUV.value = mesh.geometry.hasAttribute('uv');\r\n        this.uniforms.useColor.value = mesh.geometry.hasAttribute('color');\r\n\r\n        this.uniforms.ambientLightColor.value.copy(scene.ambientLight.color);\r\n\r\n        this.uniforms.directionalLight.value.color.copy(scene.directionalLight.color);\r\n        this.uniforms.directionalLight.value.direction.copy(scene.directionalLight.direction);\r\n\r\n    }\r\n\r\n    public override dispose(): void {\r\n\r\n        super.emit('dispose');\r\n\r\n    }\r\n\r\n}","export class WebGLConstants {\r\n\r\n    public static readonly BYTE = 5120;\r\n    public static readonly UNSIGNED_BYTE = 5121;\r\n    public static readonly SHORT = 5122;\r\n    public static readonly UNSIGNED_SHORT = 5123;\r\n    public static readonly INT = 5124\r\n    public static readonly UNSIGNED_INT = 5125;\r\n    public static readonly FLOAT = 5126;\r\n    public static readonly BOOL = 35670;\r\n\r\n    public static readonly FLOAT_VEC2 = 35664;\r\n    public static readonly INT_VEC2 = 35667;\r\n    public static readonly BOOL_VEC2 = 35671;\r\n    public static readonly FLOAT_VEC3 = 35665;\r\n    public static readonly INT_VEC3 = 35668;\r\n    public static readonly BOOL_VEC3 = 35672;\r\n    public static readonly FLOAT_VEC4 = 35666;\r\n    public static readonly INT_VEC4 = 35669;\r\n    public static readonly BOOL_VEC4 = 35673;\r\n    public static readonly FLOAT_MAT3 = 35675;\r\n    public static readonly FLOAT_MAT4 = 35676;\r\n\r\n    public static readonly SAMPLER_2D = 35678;\r\n\r\n    public static readonly POINTS = 0;\r\n    public static readonly LINES = 1;\r\n    public static readonly TRIANGLES = 4;\r\n\r\n    public static readonly TEXTURE_2D = 3553;\r\n\r\n    public static readonly ARRAY_BUFFER = 34962;\r\n    public static readonly ELEMENT_ARRAY_BUFFER = 34963;\r\n\r\n    public static readonly STATIC_DRAW = 35044;\r\n\r\n    public static readonly NEAREST = 9728; \t\t\t\t\t// 从最大的贴图中选择 1 个像素\r\n    public static readonly LINEAR = 9729; \t\t\t\t\t// 从最大的贴图中选择 4 个像素然后混合\r\n    public static readonly NEAREST_MIPMAP_NEAREST = 9984; \t// 选择最合适的贴图，然后从上面找到一个像素\r\n    public static readonly LINEAR_MIPMAP_NEAREST = 9985; \t// 选择最合适的贴图，然后取出 4 个像素进行混合\r\n    public static readonly NEAREST_MIPMAP_LINEAR = 9986; \t// 选择最合适的两个贴图，从每个上面选择 1 个像素然后混合\r\n    public static readonly LINEAR_MIPMAP_LINEAR = 9987; \t// 选择最合适的两个贴图，从每个上选择 4 个像素然后混合\r\n\r\n    public static readonly REPEAT = 10497;\r\n    public static readonly CLAMP_TO_EDGE = 33071;\r\n    public static readonly MIRRORED_REPEAT = 33648;\r\n\r\n}\r\n","import { WebGLConstants } from \"../renderer/WebGLConstants\";\r\nimport { EventObject } from \"./EventObject\";\r\n\r\nexport type TypedArray = Int8Array | Uint8Array | Int16Array | Uint16Array | Uint32Array | Float32Array;\r\n\r\nclass AttributeHelper {\r\n\r\n    public static getGLType(constructor: Function): number {\r\n\r\n        if (constructor === Int8Array) {\r\n\r\n            return WebGLConstants.BYTE;\r\n\r\n        }\r\n\r\n        if (constructor === Uint8Array) {\r\n\r\n            return WebGLConstants.UNSIGNED_BYTE;\r\n\r\n        }\r\n\r\n        if (constructor === Int16Array) {\r\n\r\n            return WebGLConstants.SHORT;\r\n\r\n        }\r\n\r\n        if (constructor === Uint16Array) {\r\n\r\n            return WebGLConstants.UNSIGNED_SHORT;\r\n\r\n        }\r\n\r\n        if (constructor === Uint32Array) {\r\n\r\n            return WebGLConstants.UNSIGNED_INT;\r\n\r\n        }\r\n\r\n        if (constructor === Float32Array) {\r\n\r\n            return WebGLConstants.FLOAT;\r\n\r\n        }\r\n\r\n        return WebGLConstants.FLOAT;\r\n\r\n    }\r\n\r\n}\r\n\r\nexport class Attribute extends EventObject {\r\n\r\n    public readonly dataType: number;\r\n    public dataUsage = WebGLConstants.STATIC_DRAW;\r\n\r\n    public needsUpdate = false;\r\n\r\n    public constructor(\r\n\r\n        public array: TypedArray,\r\n        public itemSize: number,\r\n        public normalized = false,\r\n\r\n    ) {\r\n\r\n        super();\r\n\r\n        this.dataType = AttributeHelper.getGLType(array.constructor);\r\n\r\n    }\r\n\r\n    public get count(): number {\r\n\r\n        return this.array.length / this.itemSize;\r\n\r\n    }\r\n\r\n    public getX(index: number): number {\r\n\r\n        return this.array[index * this.itemSize];\r\n\r\n    }\r\n\r\n}","import { Attribute } from \"./Attribute\";\r\nimport { EventObject } from \"./EventObject\";\r\n\r\nexport type RenderGroup = {\r\n\r\n    start: number;\r\n    count: number;\r\n    materialIndex: number;\r\n\r\n}\r\n\r\nclass GeometryHelper {\r\n\r\n    public static arrayNeedsUint32(array: number[]): boolean {\r\n\r\n        for (let ii = array.length - 1; ii >= 0; --ii) {\r\n\r\n            if (array[ii] >= 65535) {\r\n\r\n                return true;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        return false;\r\n\r\n    }\r\n\r\n}\r\n\r\nexport class Geometry extends EventObject {\r\n\r\n    public readonly attributes: { [key: string]: Attribute; } = {};\r\n    public readonly groups: RenderGroup[] = [];\r\n\r\n    public indices: Attribute | undefined;\r\n\r\n    public get position(): Attribute | undefined {\r\n\r\n        return this.getAttribute('position');\r\n\r\n    }\r\n\r\n    public setIndices(array: number[]): void {\r\n\r\n        if (GeometryHelper.arrayNeedsUint32(array)) {\r\n\r\n            this.indices = new Attribute(new Uint32Array(array), 1);\r\n\r\n        } else {\r\n\r\n            this.indices = new Attribute(new Uint16Array(array), 1);\r\n\r\n        }\r\n\r\n    }\r\n\r\n    public setAttribute(name: string, attribute: Attribute): Geometry {\r\n\r\n        this.attributes[name] = attribute;\r\n        return this;\r\n\r\n    }\r\n\r\n    public getAttribute(name: string): Attribute | undefined {\r\n\r\n        return this.attributes[name];\r\n\r\n    }\r\n\r\n    public hasAttribute(name: string): boolean {\r\n\r\n        return name in this.attributes;\r\n\r\n    }\r\n\r\n    public addGroup(start: number, count: number, materialIndex: number): Geometry {\r\n\r\n        this.groups.push(\r\n\r\n            {\r\n\r\n                start: start,\r\n                count: count,\r\n                materialIndex: materialIndex\r\n\r\n            }\r\n\r\n        );\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public dispose(): void {\r\n\r\n        this.emit('dispose');\r\n\r\n    }\r\n\r\n}","import { WebGLConstants } from \"../renderer/WebGLConstants\";\r\nimport { EventObject } from \"./EventObject\";\r\n\r\nexport type TexImage = HTMLImageElement | ImageBitmap;\r\n\r\nexport class Texture extends EventObject {\r\n\r\n    public magFilter = WebGLConstants.LINEAR;\r\n    public minFilter = WebGLConstants.LINEAR_MIPMAP_LINEAR;\r\n    public wrapS = WebGLConstants.REPEAT;\r\n    public wrapT = WebGLConstants.REPEAT;\r\n\r\n    public needsUpdate = false;\r\n\r\n    public constructor(public image?: TexImage) {\r\n\r\n        super();\r\n\r\n    }\r\n\r\n    public dispose(): void {\r\n\r\n        this.emit('dispose');\r\n\r\n    }\r\n\r\n}\r\n\r\nexport class CubeTexture extends Texture {\r\n\r\n    public constructor(public images?: TexImage[]) {\r\n\r\n        super();\r\n\r\n    }\r\n\r\n}","import { Matrix4 } from \"./Matrix4\";\r\n\r\nexport class Quaternion {\r\n\r\n    public constructor(\r\n\r\n        public x = 0,\r\n        public y = 0,\r\n        public z = 0,\r\n        public w = 1,\r\n\r\n    ) { }\r\n\r\n    public setFromArray(array: number[], offset = 0): Quaternion {\r\n\r\n        this.x = array[offset];\r\n        this.y = array[offset + 1];\r\n        this.z = array[offset + 2];\r\n        this.w = array[offset + 3];\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public setFromMatrix4(m: Matrix4): Quaternion {\r\n\r\n        const me = m.elements;\r\n        const trace = me[0] + me[5] + me[10];\r\n\r\n        if (trace > 0) {\r\n\r\n            const s = 0.5 / Math.sqrt(trace + 1.0);\r\n\r\n            this.w = 0.25 / s;\r\n            this.x = (me[6] - me[9]) * s;\r\n            this.y = (me[8] - me[2]) * s;\r\n            this.z = (me[1] - me[4]) * s;\r\n\r\n        } else if (me[0] > me[5] && me[0] > me[10]) {\r\n\r\n            const s = 2.0 * Math.sqrt(1.0 + me[0] - me[5] - me[10]);\r\n\r\n            this.w = (me[6] - me[9]) / s;\r\n            this.x = 0.25 * s;\r\n            this.y = (me[4] + me[1]) / s;\r\n            this.z = (me[8] + me[2]) / s;\r\n\r\n        } else if (me[5] > me[10]) {\r\n\r\n            const s = 2.0 * Math.sqrt(1.0 + me[5] - me[0] - me[10]);\r\n\r\n            this.w = (me[8] - me[2]) / s;\r\n            this.x = (me[4] + me[1]) / s;\r\n            this.y = 0.25 * s;\r\n            this.z = (me[9] + me[6]) / s;\r\n\r\n        } else {\r\n\r\n            const s = 2.0 * Math.sqrt(1.0 + me[10] - me[0] - me[5]);\r\n\r\n            this.w = (me[1] - me[4]) / s;\r\n            this.x = (me[8] + me[2]) / s;\r\n            this.y = (me[9] + me[6]) / s;\r\n            this.z = 0.25 * s;\r\n\r\n        }\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public setFromEuler(x: number, y: number, z: number): Quaternion {\r\n\r\n        /**\r\n         * \r\n         * 三个四元数按照 xyz 顺序相乘\r\n         *\r\n         * \t\tqx = ( cos(x), [sin(x), 0, 0] )\r\n         * \t\tqy = ( cos(y), [0, sin(y), 0] )\r\n         * \t\tqz = ( cos(z), [0, 0, sin(z)] )\r\n         *\r\n         * 四元数相乘的规则：\r\n         * \r\n         * \t\ta = ( aw, av = [ax, ay, az] ) \r\n         * \t\tb = ( bw, bv = [bx, by, bz] )\r\n         * \r\n         * \t\ta * b = aw * bw - av · bv, aw * bv + bw * av + av X bv\r\n         *\r\n         */\r\n\r\n        const c1 = Math.cos(x / 2);\r\n        const c2 = Math.cos(y / 2);\r\n        const c3 = Math.cos(z / 2);\r\n\r\n        const s1 = Math.sin(x / 2);\r\n        const s2 = Math.sin(y / 2);\r\n        const s3 = Math.sin(z / 2);\r\n\r\n        this.x = s1 * c2 * c3 + c1 * s2 * s3;\r\n        this.y = c1 * s2 * c3 - s1 * c2 * s3;\r\n        this.z = c1 * c2 * s3 + s1 * s2 * c3;\r\n        this.w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n}","import { Matrix4 } from \"../structs/Matrix4\";\r\nimport { Quaternion } from \"../structs/Quaternion\";\r\nimport { Vector3 } from \"../structs/Vector3\";\r\nimport { EventObject } from \"../modules/EventObject\";\r\n\r\nexport class TRSObject extends EventObject {\r\n\r\n    public name = ''\r\n\r\n    public readonly position = new Vector3(0, 0, 0);\r\n    public readonly rotation = new Quaternion(0, 0, 0, 1);\r\n    public readonly scale = new Vector3(1, 1, 1);\r\n\r\n    public readonly localMatrix = new Matrix4();\r\n    public readonly worldMatrix = new Matrix4();\r\n\r\n    public parent: TRSObject | undefined;\r\n    public readonly children: TRSObject[] = [];\r\n\r\n    public visible = true;\r\n\r\n    public updateMatrix(updateParents?: boolean, updateChildren?: boolean): void {\r\n\r\n        if (updateParents && this.parent) {\r\n\r\n            this.parent.updateMatrix(true, false);\r\n\r\n        }\r\n\r\n        this.localMatrix.compose(this.position, this.rotation, this.scale);\r\n        this.worldMatrix.copy(this.localMatrix);\r\n\r\n        if (this.parent) {\r\n\r\n            this.worldMatrix.multiply(this.parent.worldMatrix);\r\n\r\n        }\r\n\r\n        if (updateChildren) {\r\n\r\n            for (const child of this.children) {\r\n\r\n                child.updateMatrix(false, true);\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    public add(object: TRSObject): TRSObject {\r\n\r\n        if (object !== this) {\r\n\r\n            if (object.parent) {\r\n\r\n                object.parent.remove(object);\r\n\r\n            }\r\n\r\n            object.parent = this;\r\n            this.children.push(object);\r\n\r\n        }\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public remove(object: TRSObject): TRSObject {\r\n\r\n        if (object !== this) {\r\n\r\n            const index = this.children.indexOf(object);\r\n\r\n            if (index !== -1) {\r\n\r\n                object.parent = undefined;\r\n                this.children.splice(index, 1);\r\n\r\n            }\r\n\r\n        }\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public dispose(): void {\r\n\r\n        this.emit('dispose');\r\n\r\n    }\r\n\r\n}","import { Material } from \"../materials/Material\";\r\nimport { Matrix3 } from \"../structs/Matrix3\";\r\nimport { Matrix4 } from \"../structs/Matrix4\";\r\nimport { Geometry } from \"../modules/Geometry\";\r\nimport { TRSObject } from \"./TRSObject\";\r\nimport { PhysMaterial } from \"../materials/physical/PhysMaterial\";\r\n\r\nexport class Mesh extends TRSObject {\r\n\r\n    public readonly normalMatrix = new Matrix3();\r\n    public readonly modelViewMatrix = new Matrix4();\r\n\r\n    public constructor(\r\n\r\n        public geometry = new Geometry(),\r\n        public material: Material | Material[] = new PhysMaterial(),\r\n\r\n    ) {\r\n\r\n        super();\r\n\r\n    }\r\n\r\n    public updateModelViewMatrix(viewMatrix: Matrix4): void {\r\n\r\n        this.modelViewMatrix.multiplyMatrices(this.worldMatrix, viewMatrix);\r\n        this.normalMatrix.makeNormalMatrix(this.modelViewMatrix);\r\n\r\n    }\r\n\r\n    public override dispose(): void {\r\n\r\n        this.geometry && this.geometry.dispose();\r\n\r\n        if (this.material) {\r\n\r\n            if (Array.isArray(this.material)) {\r\n\r\n                for (const material of this.material) {\r\n\r\n                    material.dispose();\r\n\r\n                }\r\n\r\n            } else {\r\n\r\n                this.material.dispose();\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n}","import { Material } from \"../materials/Material\";\r\nimport { PhysMaterial } from \"../materials/physical/PhysMaterial\";\r\nimport { Attribute, TypedArray } from \"../modules/Attribute\";\r\nimport { Geometry } from \"../modules/Geometry\";\r\nimport { Texture } from \"../modules/Texture\";\r\nimport { Mesh } from \"../objects/Mesh\";\r\nimport { TRSObject } from \"../objects/TRSObject\";\r\nimport { WebGLConstants } from \"../renderer/WebGLConstants\";\r\n\r\nclass GLBHelper {\r\n\r\n    public static readonly textDecoder = new TextDecoder();\r\n    public static readonly material = new PhysMaterial();\r\n\r\n    public static readonly filterMapping = new Map([\r\n\r\n        [9728, WebGLConstants.NEAREST],\r\n        [9729, WebGLConstants.LINEAR],\r\n        [9984, WebGLConstants.NEAREST_MIPMAP_NEAREST],\r\n        [9985, WebGLConstants.LINEAR_MIPMAP_NEAREST],\r\n        [9986, WebGLConstants.NEAREST_MIPMAP_LINEAR],\r\n        [9987, WebGLConstants.LINEAR_MIPMAP_LINEAR],\r\n\r\n    ]);\r\n\r\n    public static readonly wrapMapping = new Map([\r\n\r\n        [10497, WebGLConstants.REPEAT],\r\n        [33071, WebGLConstants.CLAMP_TO_EDGE],\r\n        [33648, WebGLConstants.MIRRORED_REPEAT],\r\n\r\n    ]);\r\n\r\n    public static readonly sizeMapping = new Map([\r\n\r\n        ['SCALAR', 1],\r\n        ['VEC2', 2],\r\n        ['VEC3', 3],\r\n        ['VEC4', 4],\r\n        ['MAT2', 2],\r\n        ['MAT3', 9],\r\n        ['MAT4', 16],\r\n\r\n    ]);\r\n\r\n    public static getGeometryKey(primitive: any = {}): string {\r\n\r\n        const geometryKey = [`indices:${primitive.indices};`]\r\n\r\n        for (const key in primitive.attributes) {\r\n\r\n            const index = primitive.attributes[key];\r\n\r\n            geometryKey.push(`${key}:${index};`);\r\n\r\n        }\r\n\r\n        geometryKey.push(`mode:${primitive.mode};`)\r\n\r\n        return geometryKey.join();\r\n\r\n    }\r\n\r\n    public static getAttributeName(name: string): string {\r\n\r\n        switch (name) {\r\n\r\n            case 'POSITION': return 'position';\r\n\r\n            case 'NORMAL': return 'normal';\r\n\r\n            case 'TANGENT': return 'tangent';\r\n\r\n            case 'TEXCOORD_0': return 'uv';\r\n\r\n            case 'TEXCOORD_1': return 'uv2';\r\n\r\n            case 'COLOR_0': return 'color';\r\n\r\n            case 'WEIGHTS_0': return 'skinWeight';\r\n\r\n            case 'JOINTS_0': return 'skinIndex';\r\n\r\n            default: return name.toLowerCase();\r\n\r\n        }\r\n\r\n    }\r\n\r\n    public static createTypedArray(type: number, lenOrBuf: ArrayBuffer | number, offset?: number, length?: number): TypedArray {\r\n\r\n        let constructor: any;\r\n\r\n        switch (type) {\r\n\r\n            case 5120:\r\n\r\n                constructor = ArrayBuffer;\r\n                break;\r\n\r\n            case 5121:\r\n\r\n                constructor = Uint8Array;\r\n                break;\r\n\r\n            case 5122:\r\n\r\n                constructor = Int16Array;\r\n                break;\r\n\r\n            case 5123:\r\n\r\n                constructor = Uint16Array;\r\n                break;\r\n\r\n            case 5125:\r\n\r\n                constructor = Uint32Array;\r\n                break;\r\n\r\n            case 5126:\r\n            default:\r\n\r\n                constructor = Float32Array;\r\n\r\n        }\r\n\r\n        if (lenOrBuf instanceof ArrayBuffer) {\r\n\r\n            return new constructor(lenOrBuf, offset, length);\r\n\r\n        } else {\r\n\r\n            return new constructor(lenOrBuf);\r\n\r\n        }\r\n\r\n    }\r\n\r\n    public static mergeGeometries(geometries: Geometry[]): Geometry {\r\n\r\n        const merge = new Geometry();\r\n\r\n        if (!geometries.length) {\r\n\r\n            return merge;\r\n\r\n        }\r\n\r\n        const usedNames = Object.keys(geometries[0].attributes);\r\n\r\n        if (!usedNames.length) {\r\n            return merge;\r\n        }\r\n\r\n        const usedIndices = geometries[0].indices !== undefined;\r\n        const allAttributes: Attribute[][] = [];\r\n\r\n        let startIndex = 0;\r\n\r\n        for (let ii = 0, li = geometries.length; ii < li; ii++) {\r\n\r\n            const geometry = geometries[ii];\r\n            const attributes: Attribute[] = [];\r\n\r\n            if (usedIndices) {\r\n\r\n                if (!geometry.indices) {\r\n\r\n                    console.warn(`Dxy.GLBLoader : ${ii} 个几何体缺少索引数据 . `);\r\n                    continue;\r\n\r\n                }\r\n\r\n                attributes.push(geometry.indices);\r\n\r\n            }\r\n\r\n            let isBreak = false;\r\n\r\n            for (const name of usedNames) {\r\n\r\n                const attribute = geometry.getAttribute(name)\r\n\r\n                if (!attribute) {\r\n\r\n                    isBreak = true;\r\n                    break;\r\n\r\n                }\r\n\r\n                attributes.push(attribute);\r\n\r\n            }\r\n\r\n            if (isBreak) {\r\n\r\n                console.warn(`Dxy.GLBLoader : 第 ${ii} 个几何体缺少属性 . `);\r\n                continue;\r\n\r\n            }\r\n\r\n            const count = attributes[0].count;\r\n\r\n            merge.addGroup(startIndex, count, allAttributes.length);\r\n            startIndex += count;\r\n\r\n            allAttributes.push(attributes);\r\n\r\n        }\r\n\r\n        if (usedIndices) {\r\n\r\n            const data: number[] = [];\r\n            let offset = 0;\r\n\r\n            for (const attributes of allAttributes) {\r\n\r\n                const indices = attributes.shift() as Attribute;\r\n\r\n                for (let ii = 0, li = indices.count; ii < li; ii++) {\r\n\r\n                    data.push(indices.getX(ii) + offset);\r\n\r\n                }\r\n\r\n                offset += attributes[0].count;\r\n\r\n            }\r\n\r\n            merge.setIndices(data);\r\n\r\n        }\r\n\r\n        while (usedNames.length > 0) {\r\n\r\n            const attributes = allAttributes.map(e => e.shift()) as Attribute[];\r\n            const name = usedNames.shift() as string;\r\n\r\n            const attribute = GLBHelper.mergeAttributes(attributes);\r\n\r\n            if (attribute) {\r\n\r\n                merge.setAttribute(name, attribute);\r\n\r\n            }\r\n\r\n        }\r\n\r\n        return merge;\r\n\r\n    }\r\n\r\n    public static mergeAttributes(attributes: Attribute[]): Attribute | undefined {\r\n\r\n        if (attributes.length === 0) {\r\n\r\n            return undefined;\r\n\r\n        }\r\n\r\n        const dataType = attributes[0].dataType;\r\n        const itemSize = attributes[0].itemSize;\r\n        const normalized = attributes[0].normalized;\r\n\r\n        let arrayLen = 0;\r\n\r\n        for (let ii = 0, li = attributes.length; ii < li; ii++) {\r\n\r\n            const attribute = attributes[ii];\r\n\r\n            if (\r\n\r\n                attribute.dataType !== dataType ||\r\n                attribute.itemSize !== itemSize ||\r\n                attribute.normalized !== normalized\r\n\r\n            ) {\r\n\r\n                console.warn(`Dxy.GLBLoader : 第 ${ii} 个缓冲属性类型错误 . `);\r\n                return undefined;\r\n\r\n            }\r\n\r\n            arrayLen += attribute.array.length;\r\n\r\n        }\r\n\r\n        const array = GLBHelper.createTypedArray(dataType, arrayLen);\r\n        let offset = 0;\r\n\r\n        for (const attribute of attributes) {\r\n\r\n            array.set(attribute.array, offset);\r\n            offset += attribute.array.length;\r\n\r\n        }\r\n\r\n        return new Attribute(array, itemSize, normalized);\r\n\r\n    }\r\n\r\n}\r\n\r\nclass GBL {\r\n\r\n    private objectDef: any;\r\n    private bufferData: ArrayBuffer | undefined;\r\n    private geometryCache = new Map<string, Geometry>();\r\n\r\n    public constructor(\r\n\r\n        private url: string,\r\n        private onLoad?: Function\r\n\r\n    ) { }\r\n\r\n    public async parse(): Promise<TRSObject | undefined> {\r\n\r\n        await this.requestData();\r\n\r\n        let scene: TRSObject | undefined;\r\n\r\n        if (this.objectDef.scenes) {\r\n\r\n            scene = await this.loadScene(this.objectDef.scene);\r\n\r\n        }\r\n\r\n        if (typeof this.onLoad === 'function') {\r\n\r\n            this.onLoad(scene);\r\n\r\n        }\r\n\r\n        return scene;\r\n\r\n    }\r\n\r\n    private async requestData(): Promise<void> {\r\n\r\n        const response = await fetch(this.url);\r\n\r\n        const data = await response.arrayBuffer();\r\n        const dataView = new DataView(data);\r\n\r\n        // const magic = _textDecoder.decode(new Uint8Array(data, 0, 4)); // 'glTF'\r\n        // const version = dataView.getUint32(4, true); // 2\r\n\r\n        const length = dataView.getUint32(8, true);\r\n\r\n        let index = 12, chunkLength: number, chunkType: number;\r\n        let objectDef: string | undefined, bufferData: ArrayBuffer | undefined;\r\n\r\n        while (index < length) {\r\n\r\n            chunkLength = dataView.getUint32(index, true);\r\n            index += 4;\r\n\r\n            chunkType = dataView.getUint32(index, true);\r\n            index += 4;\r\n\r\n            // json\r\n            if (chunkType === 0x4E4F534A) {\r\n\r\n                const defData = new Uint8Array(data, index, chunkLength);\r\n                objectDef = GLBHelper.textDecoder.decode(defData);\r\n\r\n            }\r\n\r\n            // bin\r\n            else if (chunkType === 0x004E4942) {\r\n\r\n                bufferData = data.slice(index, index + chunkLength);\r\n\r\n            }\r\n\r\n            index += chunkLength;\r\n\r\n        }\r\n\r\n        this.objectDef = objectDef ? JSON.parse(objectDef) : {};\r\n        this.bufferData = bufferData;\r\n\r\n    }\r\n\r\n    private async loadScene(index: number): Promise<TRSObject> {\r\n\r\n        const sceneDef = this.objectDef.scenes[index];\r\n\r\n        const scene = new TRSObject();\r\n        scene.name = sceneDef.name || '';\r\n\r\n        for (const nodeIndex of sceneDef.nodes) {\r\n\r\n            const node = await this.loadNode(nodeIndex);\r\n            scene.add(node);\r\n\r\n        }\r\n\r\n        return scene;\r\n\r\n    }\r\n\r\n    private async loadNode(index: number): Promise<TRSObject> {\r\n\r\n        const nodeDef = this.objectDef.nodes[index];\r\n\r\n        if (nodeDef.instance) {\r\n\r\n            return nodeDef.instance;\r\n\r\n        }\r\n\r\n        let node: TRSObject;\r\n\r\n        if (nodeDef.mesh !== undefined) {\r\n\r\n            node = await this.loadMesh(nodeDef.mesh);\r\n\r\n        } else {\r\n\r\n            node = new TRSObject();\r\n\r\n        }\r\n\r\n        node.name = nodeDef.name || '';\r\n\r\n        if (nodeDef.translation !== undefined) {\r\n\r\n            node.position.setFromArray(nodeDef.translation as number[]);\r\n\r\n        }\r\n\r\n        if (nodeDef.rotation !== undefined) {\r\n\r\n            node.rotation.setFromArray(nodeDef.rotation as number[]);\r\n\r\n        }\r\n\r\n        if (nodeDef.scale !== undefined) {\r\n\r\n            node.scale.setFromArray(nodeDef.scale as number[]);\r\n\r\n        }\r\n\r\n        if (nodeDef.children !== undefined) {\r\n\r\n            for (const childIndex of nodeDef.children) {\r\n\r\n                const child = await this.loadNode(childIndex);\r\n                node.add(child);\r\n\r\n            }\r\n\r\n        }\r\n\r\n        nodeDef.instance = node;\r\n\r\n        return node;\r\n\r\n    }\r\n\r\n    private async loadMesh(index: number): Promise<Mesh> {\r\n\r\n        const meshDef = this.objectDef.meshes[index];\r\n\r\n        if (meshDef.instance !== undefined) {\r\n\r\n            return meshDef.instance;\r\n\r\n        }\r\n\r\n        const primitives = meshDef.primitives;\r\n\r\n        const geometryKeys: string[] = [];\r\n        const geometries = this.loadGeometries(primitives, geometryKeys);\r\n\r\n        const materials = await this.loadMaterials(primitives);\r\n\r\n        let mesh: Mesh;\r\n\r\n        if (geometries.length === 1) {\r\n\r\n            mesh = new Mesh(geometries[0], materials[0]);\r\n\r\n        } else {\r\n\r\n            const key = geometryKeys.join('_');\r\n            let geometry = this.geometryCache.get(key);\r\n\r\n            if (!geometry) {\r\n\r\n                geometry = GLBHelper.mergeGeometries(geometries);\r\n                this.geometryCache.set(key, geometry);\r\n\r\n            }\r\n\r\n            mesh = new Mesh(geometry, materials);\r\n\r\n        }\r\n\r\n        meshDef.instance = mesh;\r\n\r\n        return mesh;\r\n\r\n    }\r\n\r\n    private loadGeometries(primitives: any[], keys: string[]): Geometry[] {\r\n\r\n        const geometries: Geometry[] = [];\r\n\r\n        let geometry: Geometry | undefined;\r\n\r\n        for (const primitive of primitives) {\r\n\r\n            const key = GLBHelper.getGeometryKey(primitive);\r\n            geometry = this.geometryCache.get(key);\r\n\r\n            if (!geometry) {\r\n\r\n                geometry = new Geometry();\r\n\r\n                for (const key in primitive.attributes) {\r\n\r\n                    const attributeName = GLBHelper.getAttributeName(key);\r\n\r\n                    if (geometry.hasAttribute(attributeName)) {\r\n\r\n                        continue;\r\n\r\n                    }\r\n\r\n                    const accessorIndex = primitive.attributes[key];\r\n                    const attribute = this.loadAttribute(accessorIndex);\r\n\r\n                    geometry.setAttribute(attributeName, attribute);\r\n\r\n                }\r\n\r\n                if (primitive.indices !== undefined) {\r\n\r\n                    const attribute = this.loadAttribute(primitive.indices);\r\n                    geometry.indices = attribute;\r\n\r\n                }\r\n\r\n                this.geometryCache.set(key, geometry);\r\n\r\n            }\r\n\r\n            keys.push(key);\r\n            geometries.push(geometry);\r\n\r\n        }\r\n\r\n        return geometries;\r\n\r\n    }\r\n\r\n    private loadAttribute(index: number): Attribute {\r\n\r\n        const accessorDef = this.objectDef.accessors[index];\r\n\r\n        const itemSize = GLBHelper.sizeMapping.get(accessorDef.type) || 0;\r\n        const type = accessorDef.componentType;\r\n        const count = accessorDef.count;\r\n        const offset = accessorDef.byteOffset || 0;\r\n        const normalized = accessorDef.normalized === true;\r\n\r\n        const buffer = this.loadBufferView(accessorDef.bufferView);\r\n        const typedArray = GLBHelper.createTypedArray(type, buffer, offset, count * itemSize);\r\n\r\n        return new Attribute(typedArray, itemSize, normalized);\r\n\r\n    }\r\n\r\n    private async loadMaterials(primitives: any[]): Promise<Material[]> {\r\n\r\n        const materials: Material[] = []\r\n\r\n        for (const primitive of primitives) {\r\n\r\n            if (primitive.material === undefined) {\r\n\r\n                materials.push(GLBHelper.material);\r\n                continue;\r\n\r\n            }\r\n\r\n            const materialDef = this.objectDef.materials[primitive.material];\r\n\r\n            if (materialDef.instance) {\r\n\r\n                materials.push(materialDef.instance);\r\n                continue;\r\n\r\n            }\r\n\r\n            const material = new PhysMaterial();\r\n            materialDef.instance = material;\r\n\r\n            material.name = materialDef.name;\r\n\r\n            const pbr = materialDef.pbrMetallicRoughness;\r\n\r\n            if (Array.isArray(pbr.baseColorFactor)) {\r\n\r\n                material.color.setFromArray(pbr.baseColorFactor as number[]);\r\n                material.opacity = pbr.baseColorFactor[3];\r\n\r\n            }\r\n\r\n            if (pbr.baseColorTexture !== undefined) {\r\n\r\n                const texture = await this.loadTexture(pbr.baseColorTexture.index);\r\n                material.map = texture;\r\n\r\n            }\r\n\r\n            material.metalness = pbr.metallicFactor !== undefined ? pbr.metallicFactor : 1;\r\n            material.roughness = pbr.roughnessFactor !== undefined ? pbr.roughnessFactor : 1;\r\n\r\n            if (pbr.metallicRoughnessTexture !== undefined) {\r\n\r\n                const texture = await this.loadTexture(pbr.metallicRoughnessTexture.index);\r\n                material.metalnessMap = texture;\r\n                material.roughnessMap = texture;\r\n\r\n            }\r\n\r\n            if (materialDef.normalTexture !== undefined) {\r\n\r\n                // const texture = await this.loadTexture(materialDef.normalTexture.index);\r\n\r\n                // material.normalMap = texture;\r\n                // material.normalScale = new Vector2(1, 1);\r\n\r\n                // if (materialDef.normalTexture.scale !== undefined) {\r\n\r\n                //     material.normalScale.set(materialDef.normalTexture.scale, materialDef.normalTexture.scale);\r\n\r\n                // }\r\n\r\n            }\r\n\r\n            if (materialDef.occlusionTexture !== undefined) {\r\n\r\n                // aoMap\r\n\r\n            }\r\n\r\n            if (materialDef.emissiveFactor !== undefined) {\r\n\r\n                // emissive\r\n\r\n            }\r\n\r\n            if (materialDef.extensions !== undefined) {\r\n\r\n                // const key = 'KHR_materials_emissive_strength';\r\n\r\n                // if (materialDef.extensions[key] !== undefined) {\r\n\r\n                //     const emissiveStrength = materialDef.extensions[key].emissiveStrength;\r\n\r\n                //     if (emissiveStrength !== undefined) {\r\n\r\n                //         material.emissiveIntensity = emissiveStrength;\r\n\r\n                //     }\r\n\r\n                // }\r\n\r\n            }\r\n\r\n            if (materialDef.emissiveTexture !== undefined) {\r\n\r\n                // emissiveMap\r\n\r\n            }\r\n\r\n            // 双面渲染\r\n            if (materialDef.doubleSided === true) {\r\n\r\n                material.backfaceCulling = false;\r\n\r\n            }\r\n\r\n            // 透明模式\r\n            if (materialDef.alphaMode === 'BLEND') {\r\n\r\n                // material.transparent = true;\r\n                // material.depthWrite = false; todo: 需要测试\r\n\r\n            } else {\r\n\r\n                // 'OPAQUE' 'MASK'\r\n\r\n                // material.transparent = false;\r\n\r\n                // if (materialDef.alphaMode === 'MASK') {\r\n\r\n                // \tif (materialDef.alphaCutoff === undefined) {\r\n\r\n                // \t\t// material.alphaTest = 0.5;\r\n\r\n                // \t} else {\r\n\r\n                // \t\t// material.alphaTest = materialDef.alphaCutoff;\r\n\r\n                // \t}\r\n\r\n                // }\r\n\r\n            }\r\n\r\n            materials.push(material);\r\n\r\n        }\r\n\r\n        return materials;\r\n\r\n    }\r\n\r\n    private async loadTexture(index: number,): Promise<Texture> {\r\n\r\n        const textureDef = this.objectDef.textures[index];\r\n\r\n        if (textureDef.instance) {\r\n\r\n            return textureDef.instance;\r\n\r\n        }\r\n\r\n        const imageDef = this.objectDef.images[textureDef.source];\r\n\r\n        if (!imageDef.instance) {\r\n\r\n            const buffer = this.loadBufferView(imageDef.bufferView)\r\n            const blob = new Blob([buffer], { type: imageDef.mimeType });\r\n\r\n            imageDef.instance = await createImageBitmap(blob, { colorSpaceConversion: 'none' });\r\n\r\n        }\r\n\r\n        const texture = new Texture(imageDef.instance);\r\n        textureDef.instance = texture;\r\n\r\n        const samplerDef = this.objectDef.samplers[textureDef.sampler];\r\n        texture.magFilter = GLBHelper.filterMapping.get(samplerDef.magFilter) || texture.magFilter;\r\n        texture.minFilter = GLBHelper.filterMapping.get(samplerDef.minFilter) || texture.minFilter;\r\n        texture.wrapS = GLBHelper.wrapMapping.get(samplerDef.wrapS) || texture.wrapS;\r\n        texture.wrapT = GLBHelper.wrapMapping.get(samplerDef.wrapT) || texture.wrapT;\r\n\r\n        return texture;\r\n\r\n    }\r\n\r\n    private loadBufferView(index: number): ArrayBuffer {\r\n\r\n        const bufferViewDef = this.objectDef.bufferViews[index];\r\n\r\n        const byteLength = bufferViewDef.byteLength;\r\n        const byteOffset = bufferViewDef.byteOffset || 0;\r\n\r\n        if (this.bufferData) {\r\n\r\n            return this.bufferData.slice(byteOffset, byteOffset + byteLength);\r\n\r\n        } else {\r\n\r\n            return new ArrayBuffer(byteLength);\r\n\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nexport class GLBLoader {\r\n\r\n    public static async load(url: string, onLoad?: Function): Promise<TRSObject | undefined> {\r\n\r\n        return new GBL(url, onLoad).parse();\r\n\r\n    }\r\n\r\n}","export class ImageLoader {\r\n\r\n    public static load(url: string, onLoad?: Function): Promise<HTMLImageElement> {\r\n\r\n        return new Promise(\r\n\r\n            function (resolve, reject) {\r\n\r\n                const image = document.createElement('img');\r\n\r\n                image.onload = () => {\r\n\r\n                    onLoad && onLoad(image);\r\n                    resolve(image);\r\n\r\n                };\r\n\r\n                image.onerror = () => {\r\n\r\n                    onLoad && onLoad();\r\n                    reject();\r\n\r\n                };\r\n\r\n                image.src = url;\r\n\r\n            }\r\n\r\n        );\r\n\r\n    }\r\n\r\n    public static loadArray(urls: string[], onLoad?: Function): Promise<HTMLImageElement[]> {\r\n\r\n        return new Promise(\r\n\r\n            async function (resolve, reject) {\r\n\r\n                const images: HTMLImageElement[] = [];\r\n\r\n                for (const url of urls) {\r\n\r\n                    const image = await ImageLoader.load(url);\r\n\r\n                    if (!image) {\r\n\r\n                        onLoad && onLoad();\r\n                        reject();\r\n\r\n                    }\r\n\r\n                    images.push(image);\r\n\r\n                }\r\n\r\n                onLoad && onLoad(images);\r\n                resolve(images);\r\n\r\n            }\r\n\r\n        );\r\n\r\n    }\r\n\r\n}","import { Vector3 } from \"./Vector3\";\r\n\r\nconst EPS = 0.000001;\r\n\r\nexport class Spherical {\r\n\r\n    public constructor(\r\n\r\n        public radius = 1,\r\n\r\n        /** 俯仰角 0 指向 +y 方向，增加向 +z 方向，0 - 2PI */\r\n        public phi = 0,\r\n\r\n        /** 方位角 0 指向 +z 方向，增加向 +x 方向，0 - 2PI */\r\n        public theta = 0,\r\n\r\n    ) { }\r\n\r\n    public setFromVector3(v: Vector3): Spherical {\r\n\r\n        this.radius = v.length();\r\n\r\n        if (this.radius === 0) {\r\n\r\n            this.theta = 0;\r\n            this.phi = 0;\r\n\r\n        } else {\r\n\r\n            this.theta = Math.atan2(v.x, v.z);\r\n            this.phi = Math.acos(v.y / this.radius);\r\n\r\n        }\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public toVector3(target: Vector3): Vector3 {\r\n\r\n        const sinPhiRadius = Math.sin(this.phi) * this.radius;\r\n\r\n        target.x = sinPhiRadius * Math.sin(this.theta);\r\n        target.y = Math.cos(this.phi) * this.radius;\r\n        target.z = sinPhiRadius * Math.cos(this.theta);\r\n\r\n        return target;\r\n\r\n    }\r\n\r\n    public makeSafe(): Spherical {\r\n\r\n        this.phi = Math.max(EPS, Math.min(this.phi, Math.PI - EPS));\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n}","export class Vector2 {\r\n\r\n    public constructor(\r\n\r\n        public x = 0,\r\n        public y = 0,\r\n\r\n    ) { }\r\n\r\n    public set(x: number, y: number): Vector2 {\r\n\r\n        this.x = x;\r\n        this.y = y;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public copy(v: Vector2): Vector2 {\r\n\r\n        this.y = v.y;\r\n        this.x = v.x;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public setScalar(scalar: number): Vector2 {\r\n\r\n        this.x = scalar;\r\n        this.y = scalar;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public add(v: Vector2): Vector2 {\r\n\r\n        this.x += v.x;\r\n        this.y += v.y;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public sub(v: Vector2): Vector2 {\r\n\r\n        return this.subVectors(this, v);\r\n\r\n    }\r\n\r\n    public subVectors(l: Vector2, r: Vector2): Vector2 {\r\n\r\n        this.x = l.x - r.x;\r\n        this.y = l.y - r.y;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public multiplyScalar(scalar: number): Vector2 {\r\n\r\n        this.x *= scalar;\r\n        this.y *= scalar;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public equals(v: Vector2): boolean {\r\n\r\n        return v.x === this.x && v.y === this.y;\r\n\r\n    }\r\n\r\n}","import { Matrix3 } from \"../structs/Matrix3\";\r\nimport { Matrix4 } from \"../structs/Matrix4\";\r\nimport { Quaternion } from \"../structs/Quaternion\";\r\nimport { Spherical } from \"../structs/Spherical\";\r\nimport { Vector2 } from \"../structs/Vector2\";\r\nimport { Vector3 } from \"../structs/Vector3\";\r\nimport { TRSObject } from \"./TRSObject\";\r\n\r\nclass Instances {\r\n\r\n    public static readonly v3_1 = new Vector3();\r\n    public static readonly v3_2 = new Vector3();\r\n    public static readonly m3 = new Matrix3();\r\n    public static readonly m4 = new Matrix4();\r\n    public static readonly sph = new Spherical();\r\n\r\n}\r\n\r\nclass Controls {\r\n\r\n    public readonly dispose: () => void;\r\n\r\n    private state = 'none'; // pan zoom rotate none\r\n\r\n    private readonly rotateStart = new Vector2();\r\n    private readonly rotateEnd = new Vector2();\r\n    private readonly rotateDelta = new Vector2();\r\n\r\n    private readonly panStart = new Vector2();\r\n    private readonly panEnd = new Vector2();\r\n    private readonly panOffset = new Vector3();\r\n\r\n    private zoom = 1;\r\n\r\n    public constructor(\r\n\r\n        private readonly camera: Camera,\r\n        private readonly canvas: HTMLCanvasElement,\r\n\r\n    ) {\r\n\r\n        const onContextMenu = this.onContextMenu.bind(this);\r\n        const onPointerDown = this.onPointerDown.bind(this);\r\n        const onPointerMove = this.onPointerMove.bind(this);\r\n        const onPointerUp = this.onPointerUp.bind(this);\r\n        const onMouseWheel = this.onMouseWheel.bind(this);\r\n\r\n        canvas.addEventListener('contextmenu', onContextMenu);\r\n        canvas.addEventListener('pointerdown', onPointerDown);\r\n        canvas.addEventListener('pointermove', onPointerMove);\r\n        canvas.addEventListener('pointerup', onPointerUp);\r\n        canvas.addEventListener('pointercancel', onPointerUp);\r\n        canvas.addEventListener('wheel', onMouseWheel, { passive: false });\r\n\r\n        this.dispose = function (): void {\r\n\r\n            canvas.removeEventListener('contextmenu', onContextMenu);\r\n            canvas.removeEventListener('pointerdown', onPointerDown);\r\n            canvas.removeEventListener('pointermove', onPointerMove);\r\n            canvas.removeEventListener('pointerup', onPointerUp);\r\n            canvas.removeEventListener('pointercancel', onPointerUp);\r\n            canvas.removeEventListener('wheel', onMouseWheel);\r\n\r\n        }\r\n\r\n    }\r\n\r\n    private get position(): Vector3 {\r\n\r\n        return this.camera.position;\r\n\r\n    }\r\n\r\n    private get rotation(): Quaternion {\r\n\r\n        return this.camera.rotation;\r\n\r\n    }\r\n\r\n    private get viewPoint(): Vector3 {\r\n\r\n        if (this.camera.viewPoint instanceof TRSObject) {\r\n\r\n            Instances.v3_2.setFromMatrix4(this.camera.viewPoint.worldMatrix);\r\n            return Instances.v3_2;\r\n\r\n        } else {\r\n\r\n            return this.camera.viewPoint;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    public update(): void {\r\n\r\n        Instances.v3_1.subVectors(this.position, this.viewPoint);\r\n        Instances.sph.setFromVector3(Instances.v3_1);\r\n\r\n        // 减号目的在于让物体变换的方向和鼠标移动方向一致\r\n        Instances.sph.theta -= this.rotateDelta.x;\r\n        Instances.sph.phi -= this.rotateDelta.y;\r\n        Instances.sph.makeSafe();\r\n\r\n        Instances.sph.radius *= this.zoom;\r\n        Instances.sph.toVector3(Instances.v3_1);\r\n\r\n        this.viewPoint.sub(this.panOffset);\r\n\r\n        this.position.copy(this.viewPoint);\r\n        this.position.add(Instances.v3_1);\r\n\r\n        this.panOffset.setScalar(0);\r\n        this.rotateDelta.setScalar(0);\r\n        this.zoom = 1;\r\n\r\n        Instances.m4.makeLookAt(this.position, this.viewPoint);\r\n        this.rotation.setFromMatrix4(Instances.m4);\r\n\r\n    }\r\n\r\n    private onContextMenu(event: Event): void {\r\n\r\n        event.preventDefault();\r\n\r\n    }\r\n\r\n    private onPointerDown(event: PointerEvent): void {\r\n\r\n        this.canvas.setPointerCapture(event.pointerId);\r\n\r\n        if (event.button === 0) {\r\n\r\n            this.state = 'rotate';\r\n            this.rotateStart.set(event.clientX, event.clientY);\r\n\r\n        } else if (event.button === 2) {\r\n\r\n            this.state = 'pan';\r\n            this.panStart.set(event.clientX, event.clientY);\r\n\r\n        }\r\n\r\n    }\r\n\r\n    private onPointerMove(event: PointerEvent): void {\r\n\r\n        if (this.state === 'rotate') {\r\n\r\n            this.rotateEnd.set(event.clientX, event.clientY);\r\n            this.rotateStart.subVectors(this.rotateEnd, this.rotateStart);\r\n\r\n            // 以 [画布高度 = 2PI] 为基准，计算 xy 移动的等比例弧度\r\n            this.rotateStart.multiplyScalar(2 * Math.PI / this.canvas.height);\r\n\r\n            // 累计计算结果\r\n            this.rotateDelta.add(this.rotateStart);\r\n\r\n            this.rotateStart.copy(this.rotateEnd);\r\n\r\n            return;\r\n\r\n        }\r\n\r\n        if (this.state === 'pan') {\r\n\r\n            this.panEnd.set(event.clientX, event.clientY);\r\n            this.panStart.subVectors(this.panEnd, this.panStart);\r\n\r\n            // 计算以 fov 为夹角的中心到顶部的距离\r\n            const halfFov = this.camera.fov / 360 * Math.PI;\r\n            let edge = this.position.distanceTo(this.viewPoint);\r\n            edge *= Math.tan(halfFov);\r\n\r\n            // 以 [画布高度 = fov 垂直距离] 为基准，计算 xy 移动的等比例距离\r\n            this.panStart.multiplyScalar(2 * edge / this.canvas.height);\r\n\r\n            // 从相机空间转换到世界空间，-y 是因为像素 ↓ 为正 webgl ↑ 为正\r\n            Instances.v3_1.set(this.panStart.x, -this.panStart.y, 0);\r\n            Instances.m3.setFromMatrix4(this.camera.worldMatrix);\r\n            Instances.v3_1.applyMatrix3(Instances.m3);\r\n\r\n            // 累计计算结果\r\n            this.panOffset.add(Instances.v3_1);\r\n\r\n            this.panStart.copy(this.panEnd);\r\n\r\n            return;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    private onPointerUp(event: PointerEvent): void {\r\n\r\n        this.canvas.releasePointerCapture(event.pointerId);\r\n        this.state = 'none';\r\n\r\n    }\r\n\r\n    private onMouseWheel(event: WheelEvent): void {\r\n\r\n        event.preventDefault();\r\n\r\n        if (event.deltaY < 0) {\r\n\r\n            this.zoom *= 0.9;\r\n\r\n        }\r\n\r\n        if (event.deltaY > 0) {\r\n\r\n            this.zoom /= 0.9;\r\n\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nexport class Camera extends TRSObject {\r\n\r\n    public viewPoint: Vector3 | TRSObject = new Vector3();\r\n\r\n    public readonly controls: Controls;\r\n\r\n    public readonly viewMatrix = new Matrix4();\r\n    public readonly projectionMatrix = new Matrix4();\r\n\r\n    public fov = 50;\r\n    public aspect = 1;\r\n    public near = 1;\r\n    public far = 2000;\r\n\r\n    public constructor(canvas: HTMLCanvasElement) {\r\n\r\n        super();\r\n        this.name = 'camera';\r\n\r\n        this.controls = new Controls(this, canvas);\r\n\r\n    }\r\n\r\n    public override updateMatrix(updateParents?: boolean, updateChildren?: boolean): void {\r\n\r\n        this.controls.update();\r\n\r\n        super.updateMatrix(updateParents, updateChildren);\r\n        this.viewMatrix.copy(this.worldMatrix).invert();\r\n\r\n    }\r\n\r\n    public updateProjectionMatrix(): void {\r\n\r\n        const near = this.near;\r\n        const far = this.far;\r\n\r\n        const fov = this.fov / 180 * Math.PI;\r\n\r\n        // 计算 near 范围的 top bottom right left\r\n\r\n        const top = near * Math.tan(fov * 0.5);\r\n        const bottom = -top;\r\n        const right = top * this.aspect;\r\n        const left = -right;\r\n\r\n        this.projectionMatrix.makePerspective(left, right, top, bottom, near, far);\r\n\r\n    }\r\n\r\n}","import { IUniform, Material } from \"../Material\";\r\nimport vertexShader from './vertex.glsl';\r\nimport fragmentShader from './fragment.glsl';\r\nimport { CubeTexture, Texture } from \"../../modules/Texture\";\r\nimport { Camera } from \"../../objects/Camera\";\r\nimport { Mesh } from \"../../objects/Mesh\";\r\nimport { Scene } from \"../../objects/Scene\";\r\nimport { Matrix4 } from \"../../structs/Matrix4\";\r\n\r\ntype Uniforms = {\r\n\r\n    map: IUniform<Texture | undefined>;\r\n    cube: IUniform<CubeTexture | undefined>;\r\n    isCube: IUniform<boolean>;\r\n    viewMatrix: IUniform<Matrix4>;\r\n    projectionMatrix: IUniform<Matrix4>;\r\n}\r\n\r\nexport class BGMaterial extends Material {\r\n\r\n    declare public uniforms: Uniforms;\r\n\r\n    public constructor() {\r\n\r\n        super();\r\n\r\n        this.vertexShader = vertexShader;\r\n        this.fragmentShader = fragmentShader;\r\n\r\n        this.setUniform('map', undefined);\r\n        this.setUniform('cube', undefined);\r\n        this.setUniform('isCube', false);\r\n        this.setUniform('viewMatrix', new Matrix4());\r\n        this.setUniform('projectionMatrix', new Matrix4());\r\n\r\n    }\r\n\r\n    public get map(): Texture | undefined {\r\n\r\n        return this.uniforms.map.value;\r\n\r\n    }\r\n\r\n    public set map(map: Texture) {\r\n\r\n        this.uniforms.map.value = map;\r\n\r\n    }\r\n\r\n    public get cube(): CubeTexture | undefined {\r\n\r\n        return this.uniforms.cube.value;\r\n\r\n    }\r\n\r\n    public set cube(cube: CubeTexture) {\r\n\r\n        this.uniforms.cube.value = cube;\r\n\r\n    }\r\n\r\n    public get isCube(): boolean {\r\n\r\n        return this.uniforms.isCube.value;\r\n\r\n    }\r\n\r\n    public set isCube(flag: boolean) {\r\n\r\n        this.uniforms.isCube.value = !!flag;\r\n\r\n    }\r\n\r\n    public override onBeforRender(scene: Scene, mesh: Mesh, camera: Camera): void {\r\n\r\n        if (this.isCube) {\r\n\r\n            this.uniforms.viewMatrix.value.copy(camera.viewMatrix);\r\n            this.uniforms.projectionMatrix.value.copy(camera.projectionMatrix);\r\n\r\n        }\r\n\r\n    }\r\n\r\n    public override dispose(): void {\r\n\r\n        super.emit('dispose');\r\n\r\n    }\r\n\r\n}","import { Color } from \"../structs/Color\";\r\nimport { Matrix3 } from \"../structs/Matrix3\";\r\nimport { Vector3 } from \"../structs/Vector3\";\r\nimport { Camera } from \"./Camera\";\r\nimport { TRSObject } from \"./TRSObject\";\r\n\r\nclass Instances {\r\n\r\n    public static readonly m3 = new Matrix3();\r\n\r\n}\r\n\r\nclass Light extends TRSObject {\r\n\r\n    public readonly lightColor = new Color(1, 1, 1);\r\n    public lightIntensity = 1;\r\n\r\n    public readonly color = new Color(1, 1, 1);\r\n\r\n    public constructor() {\r\n\r\n        super();\r\n        this.name = 'light';\r\n\r\n    }\r\n\r\n    public update(camera?: Camera): void {\r\n\r\n        this.color.copy(this.lightColor);\r\n        this.color.multiplyScalar(this.lightIntensity);\r\n\r\n    }\r\n\r\n}\r\n\r\nexport class AmbientLight extends Light {\r\n\r\n    public constructor() {\r\n\r\n        super();\r\n        this.name = 'ambientLight';\r\n\r\n    }\r\n\r\n}\r\n\r\nexport class DirectionalLight extends Light {\r\n\r\n    public readonly target = new Vector3(0, 0, 0);\r\n    public readonly direction = new Vector3(0, 1, 0);\r\n\r\n    public constructor() {\r\n\r\n        super();\r\n        this.name = 'directionalLight';\r\n\r\n    }\r\n\r\n    public override update(camera: Camera): void {\r\n\r\n        super.update();\r\n\r\n        this.direction.copy(this.position);\r\n        this.direction.sub(this.target);\r\n\r\n        Instances.m3.setFromMatrix4(camera.viewMatrix)\r\n        this.direction.applyMatrix3(Instances.m3);\r\n\r\n        this.direction.normalize();\r\n\r\n    }\r\n\r\n}","import { BGMaterial } from \"../materials/background/BGMaterial\";\r\nimport { Attribute } from \"../modules/Attribute\";\r\nimport { Geometry } from \"../modules/Geometry\";\r\nimport { CubeTexture, TexImage, Texture } from \"../modules/Texture\";\r\nimport { Color } from \"../structs/Color\";\r\nimport { Camera } from \"./Camera\";\r\nimport { DirectionalLight, AmbientLight } from \"./Light\";\r\nimport { Mesh } from \"./Mesh\";\r\nimport { TRSObject } from \"./TRSObject\";\r\n\r\nexport class Scene extends TRSObject {\r\n\r\n    private static planeMesh: Mesh | undefined;\r\n    private static cubeMesh: Mesh | undefined;\r\n\r\n    public background: undefined | Color | Mesh;\r\n\r\n    public readonly ambientLight: AmbientLight;\r\n    public readonly directionalLight: DirectionalLight;\r\n\r\n    public constructor() {\r\n\r\n        super();\r\n        this.name = 'scene';\r\n\r\n        this.ambientLight = new AmbientLight();\r\n        this.directionalLight = new DirectionalLight();\r\n\r\n    }\r\n\r\n    public updateMatrix(updateParents?: boolean, updateChildren?: boolean): void {\r\n\r\n        super.updateMatrix(updateParents, updateChildren);\r\n\r\n        this.ambientLight.updateMatrix();\r\n        this.directionalLight.updateMatrix();\r\n\r\n    }\r\n\r\n    public updateLights(camera: Camera): void {\r\n\r\n        this.ambientLight.update();\r\n        this.directionalLight.update(camera);\r\n\r\n    }\r\n\r\n    public setBackgroundColor(color: string): void {\r\n\r\n        if (this.background instanceof Mesh) {\r\n\r\n            this.background.dispose();\r\n\r\n        }\r\n\r\n        this.background = new Color();\r\n        this.background.setStyle(color);\r\n\r\n    }\r\n\r\n    public setBackgroundImage(image: TexImage): void {\r\n\r\n        if (!Scene.planeMesh) {\r\n\r\n            const vertices = [-1, 1, -1, -1, 1, 1, -1, -1, 1, -1, 1, 1];\r\n            const position = new Attribute(new Float32Array(vertices), 2);\r\n\r\n            const uvs = [0, 1, 0, 0, 1, 1, 0, 0, 1, 0, 1, 1];\r\n            const uv = new Attribute(new Float32Array(uvs), 2);\r\n\r\n            const geometry = new Geometry();\r\n            geometry.setAttribute('position', position);\r\n            geometry.setAttribute('uv', uv);\r\n\r\n            Scene.planeMesh = new Mesh(geometry, new BGMaterial());\r\n\r\n        }\r\n\r\n        this.background = Scene.planeMesh;\r\n\r\n        const material = this.background.material as BGMaterial;\r\n        material.map && material.map.dispose();\r\n        material.map = new Texture(image);\r\n\r\n    }\r\n\r\n    public setBackgroundCube(images: TexImage[]): void {\r\n\r\n        if (!Scene.cubeMesh) {\r\n\r\n            const DLF = [-0.5, -0.5, 0.5]; // down left front 1\r\n            const DRF = [0.5, -0.5, 0.5]; // down right front 2\r\n            const URF = [0.5, 0.5, 0.5]; // up right font 3\r\n            const ULF = [-0.5, 0.5, 0.5]; // up left front 4\r\n            const DLB = [-0.5, -0.5, -0.5]; // down left back 5\r\n            const DRB = [0.5, -0.5, -0.5]; // down right back 6\r\n            const URB = [0.5, 0.5, -0.5]; // up right back 7\r\n            const ULB = [-0.5, 0.5, -0.5]; // up left back 8\r\n\r\n            const vertices = [\r\n\r\n                ULF, ULB, URB, ULF, URB, URF, // up\r\n                DLB, DLF, DRF, DLB, DRF, DRB, // down\r\n                DLB, ULB, ULF, DLB, ULF, DLF, // left\r\n                DRF, URF, URB, DRF, URB, DRB, // right\r\n                DLF, ULF, URF, DLF, URF, DRF, // front\r\n                DRB, URB, ULB, DRB, ULB, DLB, // back\r\n\r\n            ].flat();\r\n\r\n            const position = new Attribute(new Float32Array(vertices), 3);\r\n\r\n            const geometry = new Geometry();\r\n            geometry.setAttribute('position', position);\r\n\r\n            const material = new BGMaterial();\r\n            material.isCube = true;\r\n\r\n            Scene.cubeMesh = new Mesh(geometry, material);\r\n\r\n        }\r\n\r\n        this.background = Scene.cubeMesh;\r\n\r\n        const material = this.background.material as BGMaterial;\r\n        material.cube && material.cube.dispose();\r\n        material.cube = new CubeTexture(images);\r\n\r\n    }\r\n\r\n}","import { Attribute } from \"../modules/Attribute\";\r\nimport { WebGL } from \"./WebGL\";\r\n\r\ntype PointerInfo = {\r\n\r\n    buffer?: WebGLBuffer;\r\n    size?: number;\r\n    type?: number;\r\n    normalized?: boolean;\r\n\r\n}\r\n\r\nexport class WebGLAttribute {\r\n\r\n    private readonly enableVAOs = new Set<WebGLVertexArrayObject>();\r\n    private readonly pointerVAOs = new Map<WebGLVertexArrayObject, PointerInfo>();\r\n\r\n    public constructor(\r\n\r\n        renderer: WebGL,\r\n        private location: number,\r\n        public name: string,\r\n        private gl = renderer.gl,\r\n        private state = renderer.state,\r\n        private cache = renderer.cache,\r\n\r\n    ) { }\r\n\r\n    public isEnable(vao: WebGLVertexArrayObject): boolean {\r\n\r\n        return this.enableVAOs.has(vao);\r\n\r\n    }\r\n\r\n    public enable(vao: WebGLVertexArrayObject): void {\r\n\r\n        if (!this.isEnable(vao)) {\r\n\r\n            this.state.bindVertexArray(vao);\r\n            this.gl.enableVertexAttribArray(this.location);\r\n            this.enableVAOs.add(vao);\r\n\r\n        }\r\n\r\n    }\r\n\r\n    public disable(vao: WebGLVertexArrayObject): void {\r\n\r\n        if (this.isEnable(vao)) {\r\n\r\n            this.state.bindVertexArray(vao);\r\n            this.gl.disableVertexAttribArray(this.location);\r\n            this.enableVAOs.delete(vao);\r\n\r\n        }\r\n\r\n    }\r\n\r\n    public bind(attribute: Attribute, vao: WebGLVertexArrayObject): void {\r\n\r\n        const buffer = this.cache.getBuffer(attribute);\r\n\r\n        if (!buffer) {\r\n\r\n            return;\r\n\r\n        }\r\n\r\n        let pointerInfo = this.pointerVAOs.get(vao);\r\n\r\n        if (!pointerInfo) {\r\n\r\n            pointerInfo = {};\r\n            this.pointerVAOs.set(vao, pointerInfo);\r\n\r\n            this.enable(vao);\r\n\r\n        }\r\n\r\n        const itemSize = attribute.itemSize;\r\n        const dataType = attribute.dataType;\r\n        const normalized = attribute.normalized;\r\n\r\n        if (\r\n\r\n            pointerInfo.buffer === buffer &&\r\n            pointerInfo.size === itemSize &&\r\n            pointerInfo.type == dataType &&\r\n            pointerInfo.normalized === normalized\r\n\r\n        ) {\r\n\r\n            return;\r\n\r\n        }\r\n\r\n        pointerInfo.buffer = buffer;\r\n        pointerInfo.size = itemSize;\r\n        pointerInfo.type = dataType;\r\n        pointerInfo.normalized = normalized;\r\n\r\n        this.state.bindBuffer(this.gl.ARRAY_BUFFER, buffer);\r\n\r\n        this.gl.vertexAttribPointer(\r\n            this.location,\r\n            itemSize,\r\n            dataType,\r\n            normalized,\r\n            0,\r\n            0,\r\n        );\r\n\r\n    }\r\n\r\n    public onDeleteVAO(vao: WebGLVertexArrayObject): void {\r\n\r\n        if (this.enableVAOs.has(vao)) {\r\n\r\n            this.enableVAOs.delete(vao);\r\n\r\n        }\r\n\r\n        if (this.pointerVAOs.has(vao)) {\r\n\r\n            this.pointerVAOs.delete(vao);\r\n\r\n        }\r\n\r\n    }\r\n\r\n}","export class Vector4 {\r\n\r\n    public constructor(\r\n\r\n        public x = 0,\r\n        public y = 0,\r\n        public z = 0,\r\n        public w = 1,\r\n\r\n    ) { }\r\n\r\n    public set(x: number, y: number, z: number, w: number): Vector4 {\r\n\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n        this.w = w;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public copy(v: Vector4): Vector4 {\r\n\r\n        this.x = v.x;\r\n        this.y = v.y;\r\n        this.z = v.z;\r\n        this.w = v.w;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public equals(v: Vector4): boolean {\r\n\r\n        return v.x === this.x && v.y === this.y && v.z === this.z && v.w === this.w;\r\n\r\n    }\r\n\r\n    public equalsComponent(x: number, y: number, z: number, w: number): boolean {\r\n\r\n        return x === this.x && y === this.y && z === this.z && w === this.w;\r\n\r\n    }\r\n\r\n}","import { Color } from \"../structs/Color\";\r\nimport { Matrix3 } from \"../structs/Matrix3\";\r\nimport { Matrix4 } from \"../structs/Matrix4\";\r\nimport { Vector2 } from \"../structs/Vector2\";\r\nimport { Vector3 } from \"../structs/Vector3\";\r\nimport { Vector4 } from \"../structs/Vector4\";\r\n\r\nclass WebGLUniformHelper {\r\n\r\n    public static toUniforms(\r\n\r\n        gl: WebGL2RenderingContext,\r\n        info: WebGLActiveInfo,\r\n        location: WebGLUniformLocation,\r\n        uniforms: WebGLUniform[]\r\n\r\n    ): void {\r\n\r\n        WebGLUniformHelper.createUniform(gl, info, location, info.name, uniforms);\r\n\r\n    }\r\n\r\n    private static createUniform(\r\n\r\n        gl: WebGL2RenderingContext,\r\n        info: WebGLActiveInfo,\r\n        location: WebGLUniformLocation,\r\n        path: string,\r\n        uniforms: WebGLUniform[],\r\n\r\n    ): void {\r\n\r\n        const dotIndex = path.indexOf('.');\r\n        const braIndex = path.indexOf('[');\r\n\r\n        if (\r\n\r\n            dotIndex !== -1 &&\r\n            braIndex !== -1 &&\r\n            braIndex < dotIndex\r\n\r\n        ) {\r\n\r\n            WebGLUniformHelper.createArrayStruct(gl, info, location, path, uniforms);\r\n\r\n        } else if (dotIndex !== -1) {\r\n\r\n            WebGLUniformHelper.createStruct(gl, info, location, path, uniforms);\r\n\r\n        } else if (braIndex !== -1) {\r\n\r\n            WebGLUniformHelper.createArray(gl, info, location, path, uniforms);\r\n\r\n        } else {\r\n\r\n            WebGLUniformHelper.createSingle(gl, info, location, path, uniforms);\r\n\r\n        }\r\n\r\n    }\r\n\r\n    private static createSingle(\r\n\r\n        gl: WebGL2RenderingContext,\r\n        info: WebGLActiveInfo,\r\n        location: WebGLUniformLocation,\r\n        name: string,\r\n        uniforms: WebGLUniform[]\r\n\r\n    ): void {\r\n\r\n        let uniform: WebGLUniform;\r\n\r\n        switch (info.type) {\r\n\r\n            case gl.FLOAT:\r\n\r\n                uniform = new FNumberUniform(gl, info, location, name);\r\n                break;\r\n\r\n            case gl.INT:\r\n            case gl.BOOL:\r\n\r\n                uniform = new INumberUniform(gl, info, location, name);\r\n                break;\r\n\r\n            case gl.FLOAT_VEC2:\r\n\r\n                uniform = new FVector2Uniform(gl, info, location, name);\r\n                break;\r\n\r\n            case gl.INT_VEC2:\r\n            case gl.BOOL_VEC2:\r\n\r\n                uniform = new IVector2Uniform(gl, info, location, name);\r\n                break;\r\n\r\n            case gl.FLOAT_VEC3:\r\n\r\n                uniform = new FVector3Uniform(gl, info, location, name);\r\n                break;\r\n\r\n            case gl.INT_VEC3:\r\n            case gl.BOOL_VEC3:\r\n\r\n                uniform = new IVector3Uniform(gl, info, location, name);\r\n                break;\r\n\r\n            case gl.FLOAT_VEC4:\r\n\r\n                uniform = new FVector4Uniform(gl, info, location, name);\r\n                break;\r\n\r\n            case gl.INT_VEC4:\r\n            case gl.BOOL_VEC4:\r\n\r\n                uniform = new IVector4Uniform(gl, info, location, name);\r\n                break;\r\n\r\n            case gl.FLOAT_MAT3:\r\n\r\n                uniform = new Matrix3Uniform(gl, info, location, name);\r\n                break;\r\n\r\n            case gl.FLOAT_MAT4:\r\n\r\n                uniform = new Matrix4Uniform(gl, info, location, name);\r\n                break;\r\n\r\n            case gl.SAMPLER_2D:\r\n            case gl.SAMPLER_CUBE:\r\n\r\n                uniform = new TextureUniform(gl, info, location, name);\r\n                break;\r\n\r\n            default:\r\n\r\n                throw new Error(`DXY.WebGLUniform : 不支持 ${info.type} 类型的 uniform . `);\r\n\r\n        }\r\n\r\n        uniforms.push(uniform);\r\n\r\n    }\r\n\r\n    private static createArray(\r\n\r\n        gl: WebGL2RenderingContext,\r\n        info: WebGLActiveInfo,\r\n        location: WebGLUniformLocation,\r\n        path: string,\r\n        uniforms: WebGLUniform[]\r\n\r\n    ): void {\r\n\r\n        const LSBI = path.indexOf('['); // left square bracket index = LSBI = 左 中括弧 的索引值\r\n        path = path.substring(0, LSBI);\r\n\r\n        let uniform: ArrayUniform;\r\n\r\n        switch (info.type) {\r\n\r\n            case gl.FLOAT:\r\n\r\n                uniform = new FArrayUniform(gl, info, location, path);\r\n\r\n                break;\r\n\r\n            case gl.INT:\r\n            case gl.BOOL:\r\n\r\n                uniform = new IArrayUniform(gl, info, location, path);\r\n\r\n                break;\r\n\r\n            default:\r\n\r\n                throw new Error(`DXY.WebGLUniform : 不支持 ${info.type} 类型的 uniform . `);\r\n\r\n        }\r\n\r\n        uniform.size = info.size;\r\n        uniforms.push(uniform);\r\n\r\n    }\r\n\r\n    private static createStruct(\r\n\r\n        gl: WebGL2RenderingContext,\r\n        info: WebGLActiveInfo,\r\n        location: WebGLUniformLocation,\r\n        name: string,\r\n        uniforms: WebGLUniform[]\r\n\r\n    ): void {\r\n\r\n        const dotIndex = name.indexOf('.');\r\n        const firstName = name.substring(0, dotIndex);\r\n\r\n        let struct = uniforms.find(e => e.name === firstName) as StructUniform;\r\n\r\n        if (!struct) {\r\n\r\n            struct = new StructUniform(gl, info, location, firstName);\r\n            uniforms.push(struct);\r\n\r\n        }\r\n\r\n        name = name.substring(dotIndex + 1);\r\n        WebGLUniformHelper.createUniform(gl, info, location, name, struct.uniforms);\r\n\r\n    }\r\n\r\n    private static createArrayStruct(\r\n\r\n        gl: WebGL2RenderingContext,\r\n        info: WebGLActiveInfo,\r\n        location: WebGLUniformLocation,\r\n        path: string,\r\n        uniforms: WebGLUniform[]\r\n\r\n    ): void {\r\n\r\n        const LSBI = path.indexOf('['); // left square bracket index = LSBI = 左 中括弧 的索引值\r\n        const firstName = path.substring(0, LSBI);\r\n\r\n        let structArray = uniforms.find(e => e.name === firstName) as StructArrayUniform;\r\n\r\n        if (!structArray) {\r\n\r\n            structArray = new StructArrayUniform(gl, info, location, firstName);\r\n            uniforms.push(structArray);\r\n\r\n        }\r\n\r\n        const RSBI = path.indexOf(']'); // right square bracket index = RSBI = 右 中括弧 的索引值\r\n        const indexStr = path.substring(LSBI + 1, RSBI);\r\n        const index = Number(indexStr);\r\n\r\n        structArray.size = index + 1;\r\n\r\n        let struct = structArray.uniforms[index]\r\n\r\n        if (!struct) {\r\n\r\n            struct = new StructUniform(gl, info, location, indexStr);\r\n            structArray.uniforms[index] = struct;\r\n\r\n        }\r\n\r\n        path = path.substring(RSBI + 2);\r\n        WebGLUniformHelper.createSingle(gl, info, location, path, struct.uniforms);\r\n\r\n    }\r\n\r\n}\r\n\r\nexport abstract class WebGLUniform<T = any> {\r\n\r\n    public constructor(\r\n\r\n        public readonly gl: WebGL2RenderingContext,\r\n        public readonly info: WebGLActiveInfo,\r\n        public readonly location: WebGLUniformLocation,\r\n        public readonly name: string,\r\n        public current: T\r\n\r\n    ) { }\r\n\r\n    public set(value: T): void { }\r\n\r\n    public static toUniforms(\r\n\r\n        gl: WebGL2RenderingContext,\r\n        info: WebGLActiveInfo,\r\n        location: WebGLUniformLocation,\r\n        uniforms: WebGLUniform[] = [],\r\n\r\n    ): WebGLUniform[] {\r\n\r\n        WebGLUniformHelper.toUniforms(gl, info, location, uniforms);\r\n        return uniforms;\r\n\r\n    }\r\n\r\n}\r\n\r\n//#region array\r\n\r\nabstract class ArrayUniform<T = number[]> extends WebGLUniform<T>{\r\n\r\n    public size = 0;\r\n\r\n    public constructor(\r\n\r\n        gl: WebGL2RenderingContext,\r\n        info: WebGLActiveInfo,\r\n        location: WebGLUniformLocation,\r\n        name: string,\r\n\r\n    ) {\r\n\r\n        super(gl, info, location, name, [] as T);\r\n\r\n    }\r\n\r\n    public override set(value: T): void {\r\n\r\n        if (Array.isArray(value) && value.length >= this.size) {\r\n\r\n            this.current = value;\r\n            this.safeSet();\r\n\r\n        }\r\n\r\n    }\r\n\r\n    protected safeSet(): void { }\r\n\r\n}\r\n\r\nclass FArrayUniform extends ArrayUniform {\r\n\r\n    protected override safeSet(): void {\r\n\r\n        this.gl.uniform1fv(this.location, this.current);\r\n\r\n    }\r\n\r\n}\r\n\r\nclass IArrayUniform extends ArrayUniform {\r\n\r\n    protected override safeSet(): void {\r\n\r\n        this.gl.uniform1iv(this.location, this.current);\r\n\r\n    }\r\n\r\n}\r\n\r\nclass StructArrayUniform extends ArrayUniform<object[]> {\r\n\r\n    public uniforms: StructUniform[] = [];\r\n\r\n    public override safeSet(): void {\r\n\r\n        for (let ii = 0, li = this.uniforms.length; ii < li; ii++) {\r\n\r\n            this.uniforms[ii].set(this.current[ii]);\r\n\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n//#endregion\r\n\r\n//#region single\r\n\r\nclass FNumberUniform extends WebGLUniform<number>{\r\n\r\n    public constructor(\r\n\r\n        gl: WebGL2RenderingContext,\r\n        info: WebGLActiveInfo,\r\n        location: WebGLUniformLocation,\r\n        name: string,\r\n\r\n    ) {\r\n\r\n        super(gl, info, location, name, NaN);\r\n\r\n    }\r\n\r\n    public override set(value: number): void {\r\n\r\n        if (typeof value !== 'number') {\r\n\r\n            value = Number(value);\r\n\r\n        }\r\n\r\n        if (value !== this.current) {\r\n\r\n            this.current = value;\r\n            this.safeSet();\r\n\r\n        }\r\n\r\n    }\r\n\r\n    protected safeSet(): void {\r\n\r\n        this.gl.uniform1f(this.location, this.current);\r\n\r\n    }\r\n\r\n}\r\n\r\nclass INumberUniform extends FNumberUniform {\r\n\r\n    protected override safeSet(): void {\r\n\r\n        this.gl.uniform1i(this.location, this.current);\r\n\r\n    }\r\n\r\n}\r\n\r\nexport class TextureUniform extends INumberUniform { }\r\n\r\nclass StructUniform extends WebGLUniform<object> {\r\n\r\n    public uniforms: WebGLUniform[] = [];\r\n\r\n    public constructor(\r\n\r\n        gl: WebGL2RenderingContext,\r\n        info: WebGLActiveInfo,\r\n        location: WebGLUniformLocation,\r\n        name: string,\r\n\r\n    ) {\r\n\r\n        super(gl, info, location, name, {});\r\n\r\n    }\r\n\r\n    public override set(valueObject: any): void {\r\n\r\n        this.current = valueObject;\r\n\r\n        for (const uniform of this.uniforms) {\r\n\r\n            if (uniform.name in valueObject) {\r\n\r\n                uniform.set(valueObject[uniform.name]);\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n//#endregion\r\n\r\n//#region Vector2\r\n\r\nclass FVector2Uniform extends WebGLUniform<Vector2> {\r\n\r\n    public constructor(\r\n\r\n        gl: WebGL2RenderingContext,\r\n        info: WebGLActiveInfo,\r\n        location: WebGLUniformLocation,\r\n        name: string,\r\n\r\n    ) {\r\n\r\n        super(gl, info, location, name, new Vector2(NaN, NaN));\r\n\r\n    }\r\n\r\n    public override set(value: Vector2): void {\r\n\r\n        if (value instanceof Vector2 && !this.current.equals(value)) {\r\n\r\n            this.current.copy(value);\r\n            this.safeSet();\r\n\r\n        }\r\n\r\n    }\r\n\r\n    protected safeSet(): void {\r\n\r\n        // this.gl.uniform2fv(this.location, array);\r\n        this.gl.uniform2f(this.location, this.current.x, this.current.y);\r\n\r\n    }\r\n\r\n}\r\n\r\nclass IVector2Uniform extends FVector2Uniform {\r\n\r\n    protected override safeSet(): void {\r\n\r\n        // this.gl.uniform2iv(this.location, array);\r\n        this.gl.uniform2i(this.location, this.current.x, this.current.y);\r\n\r\n    }\r\n\r\n}\r\n\r\n//#endregion\r\n\r\n//#region Vector3\r\n\r\nclass FVector3Uniform extends WebGLUniform<Vector3> {\r\n\r\n    public constructor(\r\n\r\n        gl: WebGL2RenderingContext,\r\n        info: WebGLActiveInfo,\r\n        location: WebGLUniformLocation,\r\n        name: string,\r\n\r\n    ) {\r\n\r\n        super(gl, info, location, name, new Vector3(NaN, NaN, NaN));\r\n\r\n    }\r\n\r\n    public override set(value: Vector3 | Color): void {\r\n\r\n        if (value instanceof Vector3 && !this.current.equals(value)) {\r\n\r\n            this.current.copy(value);\r\n            this.safeSet();\r\n\r\n        }\r\n\r\n        if (\r\n\r\n            value instanceof Color &&\r\n\r\n            (\r\n                value.r !== this.current.x ||\r\n                value.g !== this.current.y ||\r\n                value.b !== this.current.z\r\n            )\r\n\r\n        ) {\r\n\r\n            value.toVector3(this.current);\r\n            this.safeSet();\r\n\r\n        }\r\n\r\n    }\r\n\r\n    protected safeSet(): void {\r\n\r\n        // this.gl.uniform3fv(this.location, array);\r\n        this.gl.uniform3f(this.location, this.current.x, this.current.y, this.current.z);\r\n\r\n    }\r\n\r\n}\r\n\r\nclass IVector3Uniform extends FVector3Uniform {\r\n\r\n    protected override safeSet(): void {\r\n\r\n        // this.gl.uniform3iv(this.location, array);\r\n        this.gl.uniform3i(this.location, this.current.x, this.current.y, this.current.z);\r\n\r\n    }\r\n\r\n}\r\n\r\n//#endregion\r\n\r\n//#region Vector4\r\n\r\nclass FVector4Uniform extends WebGLUniform<Vector4> {\r\n\r\n    public constructor(\r\n\r\n        gl: WebGL2RenderingContext,\r\n        info: WebGLActiveInfo,\r\n        location: WebGLUniformLocation,\r\n        name: string,\r\n\r\n    ) {\r\n\r\n        super(gl, info, location, name, new Vector4(NaN, NaN, NaN, NaN));\r\n\r\n    }\r\n\r\n    public override set(value: Vector4): void {\r\n\r\n        if (value instanceof Vector4 && !this.current.equals(value)) {\r\n\r\n            this.current.copy(value);\r\n            this.safeSet();\r\n\r\n        }\r\n\r\n    }\r\n\r\n    protected safeSet(): void {\r\n\r\n        // this.gl.uniform4fv(this.location, array);\r\n        this.gl.uniform4f(this.location, this.current.x, this.current.y, this.current.z, this.current.w);\r\n\r\n    }\r\n\r\n}\r\n\r\nclass IVector4Uniform extends FVector4Uniform {\r\n\r\n    protected override safeSet(): void {\r\n\r\n        // this.gl.uniform4iv(this.location, array);\r\n        this.gl.uniform4i(this.location, this.current.x, this.current.y, this.current.z, this.current.w);\r\n\r\n    }\r\n\r\n}\r\n\r\n//#endregion\r\n\r\n//#region matrix\r\n\r\nclass Matrix3Uniform extends WebGLUniform<Matrix3> {\r\n\r\n    public constructor(\r\n\r\n        gl: WebGL2RenderingContext,\r\n        info: WebGLActiveInfo,\r\n        location: WebGLUniformLocation,\r\n        name: string,\r\n\r\n    ) {\r\n\r\n        super(gl, info, location, name, new Matrix3([]));\r\n\r\n    }\r\n\r\n    public override set(value: Matrix3): void {\r\n\r\n        if (value instanceof Matrix3 && !this.current.equals(value)) {\r\n\r\n            this.current.copy(value);\r\n            this.gl.uniformMatrix3fv(this.location, false, this.current.elements);\r\n\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nclass Matrix4Uniform extends WebGLUniform<Matrix4> {\r\n\r\n    public constructor(\r\n\r\n        gl: WebGL2RenderingContext,\r\n        info: WebGLActiveInfo,\r\n        location: WebGLUniformLocation,\r\n        name: string,\r\n\r\n    ) {\r\n\r\n        super(gl, info, location, name, new Matrix4([]));\r\n\r\n    }\r\n\r\n    public override set(value: Matrix4): void {\r\n\r\n        if (value instanceof Matrix4 && !this.current.equals(value)) {\r\n\r\n            this.current.copy(value);\r\n            this.gl.uniformMatrix4fv(this.location, false, this.current.elements);\r\n\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n//#endregion\r\n","import { Material } from \"../materials/Material\";\r\nimport { Attribute } from \"../modules/Attribute\";\r\nimport { EventParameters } from \"../modules/EventObject\";\r\nimport { Geometry, RenderGroup } from \"../modules/Geometry\";\r\nimport { Texture } from \"../modules/Texture\";\r\nimport { Mesh } from \"../objects/Mesh\"\r\nimport { WebGL } from \"./WebGL\";\r\nimport { WebGLAttribute } from \"./WebGLAttribute\";\r\nimport { WebGLUniform } from \"./WebGLUniform\";\r\n\r\nexport type RenderItem = {\r\n\r\n    mesh?: Mesh;\r\n    geometry?: Geometry;\r\n    material?: Material;\r\n    group?: RenderGroup;\r\n\r\n    program?: WebGLProgram;\r\n\r\n}\r\n\r\nclass WebGLCacheHelper {\r\n\r\n    public static setLineNumber(source: string): string {\r\n\r\n        function fn(lineContent: string, lineIndex: number) {\r\n\r\n            return `${lineIndex + 1}: ${lineContent}`;\r\n\r\n        }\r\n\r\n        return source.split('\\n').map(fn).join('\\n');\r\n\r\n    }\r\n\r\n}\r\n\r\nexport class WebGLCache {\r\n\r\n    private static readonly renderItems: RenderItem[] = [];\r\n\r\n    private readonly programs = new Map<string, WebGLProgram>();\r\n    private readonly shaders = new Map<string, WebGLShader>();\r\n\r\n    private readonly attributes = new Map<WebGLProgram, WebGLAttribute[]>();\r\n    private readonly uniforms = new Map<WebGLProgram, WebGLUniform[]>();\r\n\r\n    private readonly buffers = new Map<Attribute, WebGLBuffer>();\r\n    private readonly textures = new Map<Texture, WebGLTexture>();\r\n    private readonly vaos = new Map<Geometry, WebGLVertexArrayObject>();\r\n\r\n    public constructor(\r\n\r\n        private renderer: WebGL,\r\n        private gl = renderer.gl,\r\n\r\n    ) { }\r\n\r\n    public mallocRenderItem(mesh: Mesh, geometry: Geometry, material: Material, group?: RenderGroup): RenderItem {\r\n\r\n        const item = WebGLCache.renderItems.shift() || {};\r\n\r\n        item.mesh = mesh;\r\n        item.geometry = geometry;\r\n        item.material = material;\r\n        item.group = group;\r\n\r\n        return item;\r\n\r\n    }\r\n\r\n    public freeRenderItem(items: RenderItem[]): void {\r\n\r\n        for (const item of items) {\r\n\r\n            item.mesh = undefined;\r\n            item.geometry = undefined;\r\n            item.material = undefined;\r\n            item.group = undefined;\r\n\r\n            item.program = undefined;\r\n\r\n            WebGLCache.renderItems.push(item);\r\n\r\n        }\r\n\r\n        items.length = 0;\r\n\r\n    }\r\n\r\n    public acquireProgram(material: Material): WebGLProgram {\r\n\r\n        const key = `${material.vertexShader}-${material.fragmentShader}`;\r\n\r\n        let program = this.programs.get(key);\r\n\r\n        if (!program) {\r\n\r\n            const vertexShader = this.acquireShader(material.vertexShader, this.gl.VERTEX_SHADER);\r\n            const fragmentShader = this.acquireShader(material.fragmentShader, this.gl.FRAGMENT_SHADER);\r\n\r\n            program = this.gl.createProgram() as WebGLProgram;\r\n\r\n            this.gl.attachShader(program, vertexShader);\r\n            this.gl.attachShader(program, fragmentShader);\r\n\r\n            this.gl.linkProgram(program);\r\n\r\n            const linked: boolean = this.gl.getProgramParameter(program, this.gl.LINK_STATUS);\r\n\r\n            if (!linked) {\r\n\r\n                const reminder = 'Dxy.WebGLCache : 链接着色器程序错误 . ';\r\n                const lastError = this.gl.getProgramInfoLog(program);\r\n\r\n                throw new Error([reminder, lastError].join('\\n'));\r\n\r\n            }\r\n\r\n            this.programs.set(key, program);\r\n\r\n            material.on('dispose', this.onMaterialDispose, this);\r\n\r\n        }\r\n\r\n        return program;\r\n\r\n    }\r\n\r\n    private onMaterialDispose(parameters: EventParameters): void {\r\n\r\n        const material = parameters.source as Material;\r\n        material.off('dispose', this.onMaterialDispose);\r\n\r\n\r\n\r\n    }\r\n\r\n    private acquireShader(source: string, type: number): WebGLShader {\r\n\r\n        let shader = this.shaders.get(source);\r\n\r\n        if (!shader) {\r\n\r\n            shader = this.gl.createShader(type) as WebGLShader;\r\n\r\n            this.gl.shaderSource(shader, source);\r\n            this.gl.compileShader(shader);\r\n\r\n            const compiled: boolean = this.gl.getShaderParameter(shader, this.gl.COMPILE_STATUS);\r\n\r\n            if (!compiled) {\r\n\r\n                const reminder = 'Dxy.WebGLCache.acquireShader : 编译着色器代码错误 .';\r\n                const lastError = this.gl.getShaderInfoLog(shader);\r\n                source = WebGLCacheHelper.setLineNumber(source);\r\n\r\n                throw new Error([reminder, lastError, source].join('\\n'));\r\n\r\n            }\r\n\r\n            this.shaders.set(source, shader);\r\n\r\n        }\r\n\r\n        return shader;\r\n\r\n    }\r\n\r\n    public acquireAttributes(program: WebGLProgram): WebGLAttribute[] {\r\n\r\n        let attributes = this.attributes.get(program);\r\n\r\n        if (!attributes) {\r\n\r\n            attributes = [];\r\n\r\n            const count: number = this.gl.getProgramParameter(program, this.gl.ACTIVE_ATTRIBUTES);\r\n\r\n            for (let ii = 0; ii < count; ii++) {\r\n\r\n                const info = this.gl.getActiveAttrib(program, ii) as WebGLActiveInfo;\r\n                const location: number = this.gl.getAttribLocation(program, info.name);\r\n\r\n                const attribute = new WebGLAttribute(this.renderer, location, info.name);\r\n                attributes.push(attribute);\r\n\r\n            }\r\n\r\n            this.attributes.set(program, attributes);\r\n\r\n        }\r\n\r\n        return attributes;\r\n\r\n    }\r\n\r\n    public acquireUniforms(program: WebGLProgram): WebGLUniform[] {\r\n\r\n        let uniforms = this.uniforms.get(program);\r\n\r\n        if (!uniforms) {\r\n\r\n            uniforms = [];\r\n            const count: number = this.gl.getProgramParameter(program, this.gl.ACTIVE_UNIFORMS);\r\n\r\n            for (let ii = 0; ii < count; ii++) {\r\n\r\n                const info = this.gl.getActiveUniform(program, ii) as WebGLActiveInfo;\r\n                const location = this.gl.getUniformLocation(program, info.name) as WebGLUniformLocation;\r\n\r\n                WebGLUniform.toUniforms(this.gl, info, location, uniforms);\r\n\r\n            }\r\n\r\n            this.uniforms.set(program, uniforms);\r\n\r\n        }\r\n\r\n        return uniforms;\r\n\r\n    }\r\n\r\n    public getBuffer(attribute: Attribute): WebGLBuffer | undefined {\r\n\r\n        return this.buffers.get(attribute);\r\n\r\n    }\r\n\r\n    public acquireBuffer(attribute: Attribute): WebGLBuffer {\r\n\r\n        let buffer = this.buffers.get(attribute);\r\n\r\n        if (!buffer) {\r\n\r\n            buffer = this.gl.createBuffer() as WebGLBuffer;\r\n\r\n            attribute.on('dispose', this.onAttributeDispose, this);\r\n\r\n            this.buffers.set(attribute, buffer);\r\n\r\n        }\r\n\r\n        return buffer;\r\n\r\n    }\r\n\r\n    private onAttributeDispose(parameters: EventParameters): void {\r\n\r\n        const attribute = parameters.source as Attribute;\r\n        attribute.off('dispose', this.onAttributeDispose);\r\n\r\n        const buffer = this.buffers.get(attribute);\r\n\r\n        if (!buffer) {\r\n\r\n            return;\r\n\r\n        }\r\n\r\n        this.buffers.delete(attribute);\r\n        this.gl.deleteBuffer(buffer);\r\n\r\n    }\r\n\r\n    public getTexture(texture: Texture): WebGLTexture | undefined {\r\n\r\n        return this.textures.get(texture);\r\n\r\n    }\r\n\r\n    public acquireTexture(texture: Texture): WebGLTexture {\r\n\r\n        let webglTexture = this.textures.get(texture);\r\n\r\n        if (webglTexture === undefined) {\r\n\r\n            webglTexture = this.gl.createTexture() as WebGLTexture;\r\n\r\n            texture.on('dispose', this.onTextureDispose, this);\r\n\r\n            this.textures.set(texture, webglTexture);\r\n\r\n        }\r\n\r\n        return webglTexture;\r\n\r\n    }\r\n\r\n    private onTextureDispose(parameters: EventParameters): void {\r\n\r\n        const texture = parameters.source as Texture;\r\n        texture.off('dispose', this.onTextureDispose);\r\n\r\n        const webglTexture = this.textures.get(texture);\r\n\r\n        if (!webglTexture) {\r\n\r\n            return;\r\n\r\n        }\r\n\r\n        this.textures.delete(texture);\r\n        this.gl.deleteTexture(webglTexture);\r\n\r\n    }\r\n\r\n    public acquireVertexArray(geometry: Geometry): WebGLVertexArrayObject {\r\n\r\n        let vao = this.vaos.get(geometry);\r\n\r\n        if (vao === undefined) {\r\n\r\n            vao = this.gl.createVertexArray() as WebGLVertexArrayObject;\r\n\r\n            geometry.on('dispose', this.onGeometryDispose, this);\r\n\r\n            this.vaos.set(geometry, vao);\r\n\r\n        }\r\n\r\n        return vao;\r\n\r\n    }\r\n\r\n    private onGeometryDispose(parameters: EventParameters): void {\r\n\r\n        const geometry = parameters.source as Geometry;\r\n        geometry.off('dispose', this.onGeometryDispose);\r\n\r\n        const vao = this.vaos.get(geometry);\r\n\r\n        if (!vao) {\r\n\r\n            return;\r\n\r\n        }\r\n\r\n        this.vaos.delete(geometry);\r\n\r\n        for (const [, attributes] of this.attributes) {\r\n\r\n            for (const attribute of attributes) {\r\n\r\n                attribute.onDeleteVAO(vao);\r\n\r\n            }\r\n\r\n        }\r\n\r\n        this.gl.deleteVertexArray(vao);\r\n\r\n    }\r\n\r\n}","import { Vector4 } from \"../structs/Vector4\";\r\nimport { WebGL } from \"./WebGL\";\r\n\r\nexport class WebGLState {\r\n\r\n\r\n    public readonly clearColor = new Vector4(0, 0, 0, 0);\r\n    public readonly viewport = new Vector4(0, 0, 0, 0);\r\n\r\n    public program: WebGLProgram | undefined;\r\n    public vao: WebGLVertexArrayObject | undefined;\r\n    public arrayBuffer: WebGLBuffer | undefined;\r\n    public elementArrayBuffer: WebGLBuffer | undefined;\r\n\r\n    public readonly maxTextures: number;\r\n    private textureUnits = 0;\r\n    private textureUnit = 0;\r\n    private texture2D: WebGLTexture | undefined;\r\n    private textureCubeMap: WebGLTexture | undefined;\r\n\r\n    public frontFace = false;\r\n\r\n    private readonly stateCache = new Map<number, boolean>();\r\n\r\n    public constructor(\r\n\r\n        renderer: WebGL,\r\n        private gl = renderer.gl,\r\n\r\n    ) {\r\n\r\n        this.maxTextures = gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS);\r\n\r\n        gl.enable(gl.DEPTH_TEST);\r\n\r\n        // gl.pixelStorei(gl.UNPACK_COLORSPACE_CONVERSION_WEBGL, gl.NONE);\r\n\r\n        // gl.clearColor(0, 0, 0, 0);\r\n        // gl.clearDepth(1);\r\n        // gl.clearStencil(0);\r\n        // gl.depthFunc(gl.LEQUAL);\r\n\r\n        // gl.pixelStorei(gl.UNPACK_ALIGNMENT, texture.unpackAlignment);\r\n\r\n        // gl.depthMask(true);\r\n\r\n        // gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);\r\n\r\n    }\r\n\r\n    public setClearColor(r: number, g: number, b: number, a = 1): void {\r\n\r\n        if (!this.clearColor.equalsComponent(r, g, b, a)) {\r\n\r\n            this.clearColor.set(r, g, b, a);\r\n            this.gl.clearColor(r, g, b, a);\r\n\r\n        }\r\n\r\n    }\r\n\r\n    public setViewport(x: number, y: number, width: number, height: number): void {\r\n\r\n        if (!this.viewport.equalsComponent(x, y, width, height)) {\r\n\r\n            this.viewport.set(x, y, width, height);\r\n            this.gl.viewport(x, y, width, height);\r\n\r\n        }\r\n\r\n    }\r\n\r\n    public useProgram(program: WebGLProgram): void {\r\n\r\n        if (this.program !== program) {\r\n\r\n            this.program = program;\r\n            this.gl.useProgram(program);\r\n\r\n        }\r\n\r\n    }\r\n\r\n    public resetTextureUnits(): void {\r\n\r\n        this.textureUnits = 0;\r\n\r\n    }\r\n\r\n    public allocateTextureUnits(): number {\r\n\r\n        const textureUnits = this.textureUnits;\r\n\r\n        if (textureUnits >= this.maxTextures) {\r\n\r\n            console.warn(`Dxy.WebGLState : 纹理单元超过了最大限制 ${textureUnits} . `);\r\n\r\n        }\r\n\r\n        this.textureUnits++;\r\n\r\n        return textureUnits;\r\n\r\n    }\r\n\r\n    public bindTexture(target: number, texture: WebGLTexture): void {\r\n\r\n        if (target === this.gl.TEXTURE_2D && this.texture2D !== texture) {\r\n\r\n            this.gl.bindTexture(target, texture);\r\n            this.texture2D = texture;\r\n\r\n            return;\r\n\r\n        }\r\n\r\n        if (target === this.gl.TEXTURE_CUBE_MAP && this.textureCubeMap !== texture) {\r\n\r\n\r\n            this.gl.bindTexture(target, texture);\r\n            this.textureCubeMap = texture;\r\n\r\n            return;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    public activeTexture(unit: number): void {\r\n\r\n        if (this.textureUnit !== unit) {\r\n\r\n            this.gl.activeTexture(this.gl.TEXTURE0 + unit);\r\n            this.textureUnit = unit;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    public bindBuffer(target: number, buffer: WebGLBuffer): void {\r\n\r\n        if (target === this.gl.ARRAY_BUFFER && this.arrayBuffer !== buffer) {\r\n\r\n            this.arrayBuffer = buffer;\r\n            this.gl.bindBuffer(target, buffer);\r\n\r\n            return;\r\n\r\n        }\r\n\r\n        if (target === this.gl.ELEMENT_ARRAY_BUFFER && this.elementArrayBuffer !== buffer) {\r\n\r\n            this.elementArrayBuffer = buffer;\r\n            this.gl.bindBuffer(target, buffer);\r\n\r\n            return;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    public bindVertexArray(vao: WebGLVertexArrayObject): void {\r\n\r\n        if (this.vao !== vao) {\r\n\r\n            this.vao = vao;\r\n            this.gl.bindVertexArray(vao);\r\n\r\n        }\r\n\r\n    }\r\n\r\n    public setFrontFace(isCW: boolean): void {\r\n\r\n        if (this.frontFace !== isCW) {\r\n\r\n            this.frontFace = isCW;\r\n            this.gl.frontFace(isCW ? this.gl.CW : this.gl.CCW);\r\n\r\n        }\r\n\r\n    }\r\n\r\n    public enable(id: number): void {\r\n\r\n        if (!this.stateCache.get(id)) {\r\n\r\n            this.gl.enable(id);\r\n            this.stateCache.set(id, true);\r\n\r\n        }\r\n\r\n    }\r\n\r\n    public disable(id: number): void {\r\n\r\n        if (this.stateCache.get(id)) {\r\n\r\n            this.gl.disable(id);\r\n            this.stateCache.set(id, false);\r\n\r\n        }\r\n\r\n    }\r\n\r\n    public depthTest(isEnable: boolean): void {\r\n\r\n        if (isEnable) {\r\n\r\n            this.enable(this.gl.DEPTH_TEST);\r\n\r\n        } else {\r\n\r\n            this.disable(this.gl.DEPTH_TEST);\r\n\r\n        }\r\n\r\n    }\r\n\r\n    public backfaceCulling(isEnable: boolean): void {\r\n\r\n        if (isEnable) {\r\n\r\n            this.enable(this.gl.CULL_FACE);\r\n            this.gl.cullFace(this.gl.BACK);\r\n\r\n        } else {\r\n\r\n            this.disable(this.gl.CULL_FACE);\r\n\r\n        }\r\n\r\n    }\r\n\r\n}","import { Material } from \"../materials/Material\";\r\nimport { Attribute } from \"../modules/Attribute\";\r\nimport { Geometry } from \"../modules/Geometry\";\r\nimport { CubeTexture, Texture } from \"../modules/Texture\";\r\nimport { Camera } from \"../objects/Camera\";\r\nimport { Mesh } from \"../objects/Mesh\";\r\nimport { Scene } from \"../objects/Scene\";\r\nimport { TRSObject } from \"../objects/TRSObject\";\r\nimport { Color } from \"../structs/Color\";\r\nimport { RenderItem, WebGLCache } from \"./WebGLCache\";\r\nimport { WebGLState } from \"./WebGLState\";\r\nimport { TextureUniform } from \"./WebGLUniform\";\r\n\r\nclass ContextHelper {\r\n\r\n    private static readonly attributes = {\r\n\r\n        alpha: true,\r\n        depth: true,\r\n        stencil: true,\r\n        antialias: false,\r\n        premultipliedAlpha: true,\r\n        preserveDrawingBuffer: false,\r\n        powerPreference: \"default\",\r\n        failIfMajorPerformanceCaveat: false,\r\n\r\n    }\r\n\r\n    public static getWebGL2(canvas: HTMLCanvasElement): WebGL2RenderingContext {\r\n\r\n        const context = canvas.getContext('webgl2', this.attributes);\r\n\r\n        if (!context) {\r\n\r\n            throw new Error('Dxy.WebGL : 当前环境不支持 webgl2 . ');\r\n\r\n        }\r\n\r\n        return context as WebGL2RenderingContext;\r\n\r\n    }\r\n\r\n}\r\n\r\nexport class WebGL {\r\n\r\n    public readonly gl: WebGL2RenderingContext;\r\n\r\n    public readonly cache: WebGLCache;\r\n    public readonly state: WebGLState;\r\n\r\n    public constructor(canvas: HTMLCanvasElement) {\r\n\r\n        this.gl = ContextHelper.getWebGL2(canvas);\r\n\r\n        this.cache = new WebGLCache(this);\r\n        this.state = new WebGLState(this);\r\n\r\n    }\r\n\r\n    public render(scene: Scene, camera: Camera): void {\r\n\r\n        const gl = this.gl;\r\n\r\n        camera.updateMatrix();\r\n        scene.updateLights(camera);\r\n\r\n        const renderList: RenderItem[] = [];\r\n        this.projectObject(scene, camera, renderList);\r\n\r\n        this.renderBackground(scene, camera, renderList);\r\n\r\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT | gl.STENCIL_BUFFER_BIT);\r\n\r\n        this.renderObjects(renderList, scene, camera);\r\n\r\n        this.cache.freeRenderItem(renderList);\r\n\r\n    }\r\n\r\n    private projectObject(object: TRSObject, camera: Camera, renderList: RenderItem[]): void {\r\n\r\n        if (!object.visible) {\r\n\r\n            return;\r\n\r\n        }\r\n\r\n        object.updateMatrix();\r\n\r\n        if (object instanceof Mesh) {\r\n\r\n            object.updateModelViewMatrix(camera.viewMatrix);\r\n\r\n            const geometry = object.geometry;\r\n\r\n            if (Array.isArray(object.material)) {\r\n\r\n                const materials = object.material;\r\n                const renderGroups = geometry.groups;\r\n\r\n                for (const group of renderGroups) {\r\n\r\n                    const material = materials[group.materialIndex];\r\n\r\n                    const item = this.cache.mallocRenderItem(object, geometry, material, group);\r\n                    renderList.push(item);\r\n\r\n                }\r\n\r\n            } else {\r\n\r\n                const item = this.cache.mallocRenderItem(object, geometry, object.material);\r\n                renderList.push(item);\r\n\r\n            }\r\n\r\n        }\r\n\r\n        for (const child of object.children) {\r\n\r\n            this.projectObject(child, camera, renderList);\r\n\r\n        }\r\n\r\n    }\r\n\r\n    private renderBackground(scene: Scene, camera: Camera, renderList: RenderItem[]): void {\r\n\r\n        if (scene.background instanceof Color) {\r\n\r\n            this.state.setClearColor(scene.background.r, scene.background.g, scene.background.b);\r\n\r\n        } else if (scene.background instanceof Mesh) {\r\n\r\n            const item = this.cache.mallocRenderItem(\r\n\r\n                scene.background,\r\n                scene.background.geometry,\r\n                scene.background.material as Material\r\n\r\n            );\r\n\r\n            renderList.unshift(item);\r\n\r\n        }\r\n\r\n    }\r\n\r\n    private renderObjects(renderList: RenderItem[], scene: Scene, camera: Camera): void {\r\n\r\n        for (const item of renderList) {\r\n\r\n            const material = item.material as Material;\r\n            const program = this.cache.acquireProgram(material);\r\n            item.program = program;\r\n\r\n            this.state.useProgram(program)\r\n\r\n            this.bindGeometry(item);\r\n            this.applyMaterial(item, scene, camera);\r\n            this.renderBuffer(item);\r\n\r\n        }\r\n\r\n    }\r\n\r\n    private bindGeometry(item: RenderItem): void {\r\n\r\n        const geometry = item.geometry as Geometry;\r\n        const program = item.program as WebGLProgram;\r\n\r\n        const vao = this.cache.acquireVertexArray(geometry);\r\n\r\n        this.state.bindVertexArray(vao);\r\n\r\n        const webglAttributes = this.cache.acquireAttributes(program);\r\n\r\n        for (const webglAttribute of webglAttributes) {\r\n\r\n            const attribute = geometry.getAttribute(webglAttribute.name);\r\n\r\n            if (!attribute) {\r\n\r\n                webglAttribute.disable(vao);\r\n                continue;\r\n\r\n            }\r\n\r\n            this.uploadAttributeToGPU(this.gl.ARRAY_BUFFER, attribute);\r\n\r\n            webglAttribute.bind(attribute, vao);\r\n\r\n        }\r\n\r\n        if (geometry.indices !== undefined) {\r\n\r\n            this.uploadAttributeToGPU(this.gl.ELEMENT_ARRAY_BUFFER, geometry.indices);\r\n\r\n        }\r\n\r\n    }\r\n\r\n    private uploadAttributeToGPU(target: number, attribute: Attribute): void {\r\n\r\n        let buffer = this.cache.getBuffer(attribute);\r\n\r\n        if (!buffer) {\r\n\r\n            buffer = this.cache.acquireBuffer(attribute);\r\n\r\n            this.state.bindBuffer(target, buffer);\r\n            this.gl.bufferData(target, attribute.array, attribute.dataUsage);\r\n\r\n            attribute.needsUpdate = false;\r\n\r\n        }\r\n\r\n        if (attribute.needsUpdate === true) {\r\n\r\n            this.state.bindBuffer(target, buffer);\r\n            this.gl.bufferSubData(target, 0, attribute.array);\r\n\r\n            attribute.needsUpdate = false;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    private applyMaterial(item: RenderItem, scene: Scene, camera: Camera): void {\r\n\r\n        const mesh = item.mesh as Mesh;\r\n        const material = item.material as Material;\r\n\r\n        material.onBeforRender(scene, mesh, camera);\r\n\r\n        const frontFaceCW = mesh.worldMatrix.determinant() < 0;\r\n        this.state.setFrontFace(frontFaceCW);\r\n\r\n        // this.state.depthTest(material.depthTest);\r\n        this.state.backfaceCulling(material.backfaceCulling);\r\n\r\n        this.state.resetTextureUnits();\r\n\r\n        this.uploadUniform(item);\r\n\r\n    }\r\n\r\n    private uploadUniform(item: RenderItem): void {\r\n\r\n        const material = item.material as Material;\r\n        const program = item.program as WebGLProgram;\r\n\r\n        const webglUniforms = this.cache.acquireUniforms(program);\r\n\r\n        for (const webglUniform of webglUniforms) {\r\n\r\n            const uniform = material.getUniform(webglUniform.name);\r\n\r\n            if (webglUniform instanceof TextureUniform) {\r\n\r\n                const unit = this.state.allocateTextureUnits();\r\n\r\n                if (uniform && uniform.value) {\r\n\r\n                    this.state.activeTexture(unit);\r\n                    this.uploadTextureToGPU(uniform.value);\r\n\r\n                }\r\n\r\n                webglUniform.set(unit);\r\n\r\n            } else if (uniform) {\r\n\r\n                webglUniform.set(uniform.value);\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    private uploadTextureToGPU(texture: Texture): void {\r\n\r\n        let webglTexture = this.cache.getTexture(texture);\r\n\r\n        if (texture instanceof CubeTexture && texture.images && texture.images.length >= 6) {\r\n\r\n            const target = this.gl.TEXTURE_CUBE_MAP;\r\n\r\n            if (!webglTexture) {\r\n\r\n                webglTexture = this.cache.acquireTexture(texture);\r\n                this.state.bindTexture(target, webglTexture);\r\n\r\n                const levels = 1;\t\t\t\t\t\t// 贴图级别\r\n                const format = this.gl.RGBA8;\t\t\t// 纹理格式\r\n                const width = texture.images[0].width;\t\t// 宽度\r\n                const height = texture.images[0].height;\t// 高度\r\n\r\n                this.gl.texStorage2D(target, levels, format, width, height);\r\n\r\n                texture.needsUpdate = true;\r\n\r\n            }\r\n\r\n            if (texture.needsUpdate === true) {\r\n\r\n                this.state.bindTexture(target, webglTexture);\r\n\r\n                this.gl.texParameteri(target, this.gl.TEXTURE_WRAP_S, texture.wrapS);\r\n                this.gl.texParameteri(target, this.gl.TEXTURE_WRAP_T, texture.wrapT);\r\n                this.gl.texParameteri(target, this.gl.TEXTURE_MAG_FILTER, texture.magFilter);\r\n                this.gl.texParameteri(target, this.gl.TEXTURE_MIN_FILTER, texture.minFilter);\r\n\r\n                const pxTarget = this.gl.TEXTURE_CUBE_MAP_POSITIVE_X;\r\n                const level = 0;\t\t\t\t\t    // 贴图级别\r\n                const xoffset = 0;\t\t\t\t\t    // x 偏移\r\n                const yoffset = 0;\t\t\t\t\t    // y 偏移\r\n                const format = this.gl.RGBA;\t\t\t// 纹理格式\r\n                const type = this.gl.UNSIGNED_BYTE;\t\t// 数据类型\r\n\r\n                for (let ii = 0; ii < 6; ii++) {\r\n\r\n                    this.gl.texSubImage2D(pxTarget + ii, level, xoffset, yoffset, format, type, texture.images[ii]);\r\n\r\n                }\r\n\r\n                this.gl.generateMipmap(target);\r\n\r\n                texture.needsUpdate = false;\r\n\r\n            } else {\r\n\r\n                this.state.bindTexture(target, webglTexture);\r\n\r\n            }\r\n\r\n        } else if (texture instanceof Texture && texture.image) {\r\n\r\n            const target = this.gl.TEXTURE_2D;\r\n\r\n            if (!webglTexture) {\r\n\r\n                webglTexture = this.cache.acquireTexture(texture);\r\n                this.state.bindTexture(target, webglTexture);\r\n\r\n                const levels = 1;\t\t\t\t\t\t// 贴图级别\r\n                const format = this.gl.RGBA8;\t\t\t// 纹理格式\r\n                const width = texture.image.width;\t\t// 宽度\r\n                const height = texture.image.height;\t// 高度\r\n\r\n                this.gl.texStorage2D(target, levels, format, width, height);\r\n\r\n                texture.needsUpdate = true;\r\n\r\n            }\r\n\r\n            if (texture.needsUpdate === true) {\r\n\r\n                this.state.bindTexture(target, webglTexture);\r\n\r\n                this.gl.texParameteri(target, this.gl.TEXTURE_WRAP_S, texture.wrapS);\r\n                this.gl.texParameteri(target, this.gl.TEXTURE_WRAP_T, texture.wrapT);\r\n                this.gl.texParameteri(target, this.gl.TEXTURE_MAG_FILTER, texture.magFilter);\r\n                this.gl.texParameteri(target, this.gl.TEXTURE_MIN_FILTER, texture.minFilter);\r\n\r\n                const level = 0;\t\t\t\t\t    // 贴图级别\r\n                const xoffset = 0;\t\t\t\t\t    // x 偏移\r\n                const yoffset = 0;\t\t\t\t\t    // y 偏移\r\n                const format = this.gl.RGBA;\t\t\t// 纹理格式\r\n                const type = this.gl.UNSIGNED_BYTE;\t\t// 数据类型\r\n\r\n                this.gl.texSubImage2D(target, level, xoffset, yoffset, format, type, texture.image);\r\n                this.gl.generateMipmap(target);\r\n\r\n                texture.needsUpdate = false;\r\n\r\n            } else {\r\n\r\n                this.state.bindTexture(target, webglTexture);\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    private renderBuffer(item: RenderItem): void {\r\n\r\n        const geometry = item.geometry as Geometry;\r\n        const group = item.group;\r\n\r\n        let start = -Infinity, count = Infinity;\r\n\r\n        if (group) {\r\n\r\n            start = group.start;\r\n            count = group.count;\r\n\r\n        }\r\n\r\n        if (geometry.indices) {\r\n\r\n            const indices = geometry.indices;\r\n\r\n            start = Math.max(start, 0);\r\n            count = Math.min(count, indices.count);\r\n\r\n            const buffer = this.cache.acquireBuffer(indices);\r\n            this.state.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, buffer);\r\n\r\n            const offset = start * indices.array.BYTES_PER_ELEMENT;\r\n            this.gl.drawElements(this.gl.TRIANGLES, count, indices.dataType, offset);\r\n\r\n        } else if (geometry.position) {\r\n\r\n            const position = geometry.position;\r\n\r\n            start = Math.max(start, 0);\r\n            count = Math.min(count, position.count);\r\n\r\n            this.gl.drawArrays(this.gl.TRIANGLES, start, count);\r\n\r\n        }\r\n\r\n    }\r\n\r\n}","import { GLBLoader } from \"./loaders/GLBLoader\";\r\nimport { ImageLoader } from \"./loaders/ImageLoader\";\r\nimport { Camera } from \"./objects/Camera\";\r\nimport { Scene } from \"./objects/Scene\";\r\nimport { TRSObject } from \"./objects/TRSObject\";\r\nimport { WebGL } from \"./renderer/WebGL\";\r\n\r\nexport default class Dxy {\r\n\r\n\tprivate frameHandle: number = -1;\r\n\r\n\tprivate width = -1;\r\n\tprivate height = -1;\r\n\r\n\tprivate readonly renderer: WebGL;\r\n\r\n\tprivate readonly scene: Scene;\r\n\tprivate readonly camera: Camera;\r\n\r\n\tpublic constructor(public readonly canvas = document.createElement('canvas')) {\r\n\r\n\t\tthis.renderer = new WebGL(canvas);\r\n\t\tthis.camera = new Camera(canvas);\r\n\t\tthis.scene = new Scene();\r\n\r\n\t\tthis.startAnimationFrame();\r\n\r\n\t}\r\n\r\n\tprivate startAnimationFrame(): void {\r\n\r\n\t\tif (this.frameHandle !== -1) {\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tconst scope = this;\r\n\t\tlet _elapsed = 0, _delta = 0;\r\n\r\n\t\tfunction frameCallback(time: number): void {\r\n\r\n\t\t\tscope.frameHandle = requestAnimationFrame(frameCallback);\r\n\r\n\t\t\ttime /= 1000;\r\n\t\t\t_delta = time - _elapsed;\r\n\t\t\t_elapsed = time;\r\n\r\n\t\t\tscope.animate(_delta);\r\n\r\n\t\t}\r\n\r\n\t\tthis.frameHandle = requestAnimationFrame(frameCallback);\r\n\r\n\t}\r\n\r\n\tprivate animate(delta: number): void {\r\n\r\n\t\tif (this.width !== this.canvas.clientWidth || this.height !== this.canvas.clientHeight) {\r\n\r\n\t\t\tthis.width = this.canvas.clientWidth;\r\n\t\t\tthis.height = this.canvas.clientHeight;\r\n\r\n\t\t\tthis.canvas.width = this.width;\r\n\t\t\tthis.canvas.height = this.height;\r\n\r\n\t\t\tthis.camera.aspect = this.width / this.height;\r\n\t\t\tthis.camera.updateProjectionMatrix();\r\n\r\n\t\t\tthis.renderer.state.setViewport(0, 0, this.width, this.height);\r\n\r\n\t\t}\r\n\r\n\t\tthis.renderer.render(this.scene, this.camera);\r\n\r\n\t}\r\n\r\n\tpublic destroy() {\r\n\r\n\t\tcancelAnimationFrame(this.frameHandle);\r\n\t\tthis.frameHandle = -1;\r\n\r\n\t}\r\n\r\n\tpublic loadModel(parameters: any = {}): void {\r\n\r\n\t\tconst type: string = parameters.type || 'glb';\r\n\t\tconst url: string = parameters.url;\r\n\r\n\t\tswitch (type) {\r\n\r\n\t\t\tcase 'glb':\r\n\r\n\t\t\t\tGLBLoader.load(url, (object: TRSObject) => {\r\n\r\n\t\t\t\t\tif (object) {\r\n\r\n\t\t\t\t\t\tthis.scene.add(object);\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'fbx':\r\n\r\n\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tpublic setBackground(parameters: any = {}): void {\r\n\r\n\t\tconst type: string = parameters.type;\r\n\t\tconst color: string = parameters.color;\r\n\t\tconst image: string = parameters.image;\r\n\t\tconst skybox: string = parameters.skybox;\r\n\r\n\t\tswitch (type) {\r\n\r\n\t\t\tcase 'color':\r\n\r\n\t\t\t\tthis.scene.setBackgroundColor(color);\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'image':\r\n\r\n\t\t\t\tImageLoader.load(image, (image: HTMLImageElement) => {\r\n\r\n\t\t\t\t\tthis.scene.setBackgroundImage(image);\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'skybox':\r\n\r\n\t\t\t\tImageLoader.loadArray(\r\n\t\t\t\t\t[\r\n\t\t\t\t\t\t`${skybox}/px.jpg`, `${skybox}/nx.jpg`,\r\n\t\t\t\t\t\t`${skybox}/py.jpg`, `${skybox}/ny.jpg`,\r\n\t\t\t\t\t\t`${skybox}/pz.jpg`, `${skybox}/nz.jpg`,\r\n\t\t\t\t\t],\r\n\t\t\t\t\t(images: HTMLImageElement[]) => {\r\n\r\n\t\t\t\t\t\tthis.scene.setBackgroundCube(images);\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n"],"names":["Instances","vertexShader","fragmentShader"],"mappings":"AAEA,MAAM,WAAW,CAAA;IAEN,OAAO,SAAS,CAAC,KAAa,EAAA;AAEjC,QAAA,IAAI,SAAiC,CAAC;QAEtC,IAAI,SAAS,GAAG,oBAAoB,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;AAE9C,YAAA,OAAO,WAAW,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;AAEzC,SAAA;QAED,IAAI,SAAS,GAAG,mBAAmB,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;AAE7C,YAAA,OAAO,WAAW,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;AAEzC,SAAA;AAED,QAAA,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;KAEpB;IAEM,OAAO,OAAO,CAAC,KAAsB,EAAA;AAExC,QAAA,MAAM,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;QACtB,MAAM,MAAM,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAEzB,QAAA,IAAI,IAAI,KAAK,KAAK,IAAI,IAAI,KAAK,MAAM,EAAE;AAEnC,YAAA,MAAM,UAAU,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;AAC5B,YAAA,IAAI,KAA6B,CAAC;YAElC,IAAI,KAAK,GAAG,8DAA8D,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE;gBAIzF,MAAM,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG,GAAG,CAAC;gBACxD,MAAM,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG,GAAG,CAAC;gBACxD,MAAM,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG,GAAG,CAAC;AAE3D,aAAA;YAED,IAAI,KAAK,GAAG,oEAAoE,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE;gBAI/F,MAAM,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG,GAAG,CAAC;gBACxD,MAAM,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG,GAAG,CAAC;gBACxD,MAAM,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG,GAAG,CAAC;AAE3D,aAAA;AAEJ,SAAA;AAED,QAAA,OAAO,MAAM,CAAC;KAEjB;IAEM,OAAO,OAAO,CAAC,KAAsB,EAAA;AAExC,QAAA,MAAM,GAAG,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;AACrB,QAAA,MAAM,IAAI,GAAG,GAAG,CAAC,MAAM,CAAC;QAExB,MAAM,MAAM,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAEzB,IAAI,IAAI,KAAK,CAAC,EAAE;AAIZ,YAAA,MAAM,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,EAAE,CAAC;AAC7C,YAAA,MAAM,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,EAAE,CAAC;AAC7C,YAAA,MAAM,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,EAAE,CAAC;AAEhD,SAAA;aAAM,IAAI,IAAI,KAAK,CAAC,EAAE;YAInB,MAAM,CAAC,GAAG,QAAQ,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;AAE5B,YAAA,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,GAAG,GAAG,IAAI,GAAG,CAAC;AAClC,YAAA,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,GAAG,IAAI,GAAG,CAAC;YACjC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,IAAI,GAAG,CAAC;AAE/B,SAAA;AAED,QAAA,OAAO,MAAM,CAAC;KAEjB;IAEM,OAAO,YAAY,CAAC,CAAS,EAAA;QAEhC,OAAO,CAAC,CAAC,GAAG,OAAO,IAAI,CAAC,GAAG,YAAY,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,YAAY,GAAG,YAAY,EAAE,GAAG,CAAC,CAAC;KAE5F;AAEJ,CAAA;MAEY,KAAK,CAAA;AAIH,IAAA,CAAA,CAAA;AACA,IAAA,CAAA,CAAA;AACA,IAAA,CAAA,CAAA;AAJX,IAAA,WAAA,CAEW,IAAI,CAAC,EACL,IAAI,CAAC,EACL,IAAI,CAAC,EAAA;QAFL,IAAC,CAAA,CAAA,GAAD,CAAC,CAAI;QACL,IAAC,CAAA,CAAA,GAAD,CAAC,CAAI;QACL,IAAC,CAAA,CAAA,GAAD,CAAC,CAAI;KAEX;AAEE,IAAA,GAAG,CAAC,CAAS,EAAE,CAAS,EAAE,CAAS,EAAA;QAEtC,IAAI,CAAC,CAAC,GAAG,WAAW,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;QACrC,IAAI,CAAC,CAAC,GAAG,WAAW,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;QACrC,IAAI,CAAC,CAAC,GAAG,WAAW,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;AAErC,QAAA,OAAO,IAAI,CAAC;KAEf;AAEM,IAAA,QAAQ,CAAC,KAAa,EAAA;AAEzB,QAAA,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,WAAW,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;QAE/C,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAElB,QAAA,OAAO,IAAI,CAAC;KAEf;AAEM,IAAA,IAAI,CAAC,KAAY,EAAA;AAEpB,QAAA,IAAI,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;AACjB,QAAA,IAAI,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;AACjB,QAAA,IAAI,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;AAEjB,QAAA,OAAO,IAAI,CAAC;KAEf;AAEM,IAAA,YAAY,CAAC,KAAe,EAAE,MAAM,GAAG,CAAC,EAAA;AAE3C,QAAA,IAAI,CAAC,CAAC,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC;QACvB,IAAI,CAAC,CAAC,GAAG,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;QAC3B,IAAI,CAAC,CAAC,GAAG,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;AAE3B,QAAA,OAAO,IAAI,CAAC;KAEf;AAEM,IAAA,cAAc,CAAC,MAAc,EAAA;AAEhC,QAAA,IAAI,CAAC,CAAC,IAAI,MAAM,CAAC;AACjB,QAAA,IAAI,CAAC,CAAC,IAAI,MAAM,CAAC;AACjB,QAAA,IAAI,CAAC,CAAC,IAAI,MAAM,CAAC;AAEjB,QAAA,OAAO,IAAI,CAAC;KAEf;AAEM,IAAA,SAAS,CAAC,MAAe,EAAA;AAE5B,QAAA,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;AAClB,QAAA,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;AAClB,QAAA,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;AAElB,QAAA,OAAO,MAAM,CAAC;KAEjB;AAEJ;;MClKY,WAAW,CAAA;AAIb,IAAA,EAAE,CAAC,SAAiB,EAAE,OAAiB,EAAE,KAAa,EAAA;AAEzD,QAAA,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;AAEhB,YAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,GAAG,EAAiC,CAAC;AAE5D,SAAA;QAED,IAAI,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QAE5C,IAAI,CAAC,QAAQ,EAAE;AAEX,YAAA,QAAQ,GAAG,IAAI,GAAG,EAAoB,CAAC;YACvC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC;AAE1C,SAAA;AAED,QAAA,QAAQ,CAAC,GAAG,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;KAEhC;IAEM,GAAG,CAAC,SAAiB,EAAE,OAAiB,EAAA;AAE3C,QAAA,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YAEhB,OAAO;AAEV,SAAA;QAED,MAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;AAE9C,QAAA,IAAI,QAAQ,EAAE;AAEV,YAAA,QAAQ,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;AAE5B,SAAA;KAEJ;AAEM,IAAA,IAAI,CAAC,SAAiB,EAAE,UAAA,GAA8B,EAAE,EAAA;AAE3D,QAAA,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YAEhB,OAAO;AAEV,SAAA;QAED,MAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;AAE9C,QAAA,IAAI,QAAQ,EAAE;AAEV,YAAA,UAAU,CAAC,MAAM,GAAG,IAAI,CAAC;AAEzB,YAAA,MAAM,OAAO,GAAG,QAAQ,CAAC,OAAO,EAAE,CAAC;YAEnC,KAAK,MAAM,CAAC,OAAO,EAAE,KAAK,CAAC,IAAI,OAAO,EAAE;AAEpC,gBAAA,OAAO,CAAC,IAAI,CAAC,KAAK,EAAE,UAAU,CAAC,CAAC;AAEnC,aAAA;AAEJ,SAAA;KAEJ;AAEJ;;ACjEK,MAAgB,QAAS,SAAQ,WAAW,CAAA;IAE9B,QAAQ,GAAiC,EAAE,CAAC;IAErD,IAAI,GAAG,EAAE,CAAC;IAEV,WAAW,GAAG,KAAK,CAAC;IAGpB,eAAe,GAAG,IAAI,CAAC;IAEvB,YAAY,GAAG,EAAE,CAAC;IAClB,cAAc,GAAG,EAAE,CAAC;IAEpB,UAAU,CAAC,IAAY,EAAE,KAAU,EAAA;QAEtC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC;AACvC,QAAA,OAAO,IAAI,CAAC;KAEf;AAEM,IAAA,UAAU,CAAC,IAAY,EAAA;AAE1B,QAAA,OAAO,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;KAE9B;AAEM,IAAA,aAAa,CAAC,KAAY,EAAE,IAAU,EAAE,MAAc,KAAW;IAEjE,OAAO,GAAA;AAEV,QAAA,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;KAExB;AAEJ;;;;;;MC3CY,OAAO,CAAA;AAIL,IAAA,CAAA,CAAA;AACA,IAAA,CAAA,CAAA;AACA,IAAA,CAAA,CAAA;AAJX,IAAA,WAAA,CAEW,IAAI,CAAC,EACL,IAAI,CAAC,EACL,IAAI,CAAC,EAAA;QAFL,IAAC,CAAA,CAAA,GAAD,CAAC,CAAI;QACL,IAAC,CAAA,CAAA,GAAD,CAAC,CAAI;QACL,IAAC,CAAA,CAAA,GAAD,CAAC,CAAI;KAEX;AAEE,IAAA,GAAG,CAAC,CAAS,EAAE,CAAS,EAAE,CAAS,EAAA;AAEtC,QAAA,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;AACX,QAAA,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;AACX,QAAA,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;AAEX,QAAA,OAAO,IAAI,CAAC;KAEf;AAEM,IAAA,IAAI,CAAC,CAAU,EAAA;AAElB,QAAA,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AACb,QAAA,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AACb,QAAA,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AAEb,QAAA,OAAO,IAAI,CAAC;KAEf;AAEM,IAAA,SAAS,CAAC,MAAc,EAAA;AAE3B,QAAA,IAAI,CAAC,CAAC,GAAG,MAAM,CAAC;AAChB,QAAA,IAAI,CAAC,CAAC,GAAG,MAAM,CAAC;AAChB,QAAA,IAAI,CAAC,CAAC,GAAG,MAAM,CAAC;AAEhB,QAAA,OAAO,IAAI,CAAC;KAEf;AAEM,IAAA,YAAY,CAAC,KAAe,EAAE,MAAM,GAAG,CAAC,EAAA;AAE3C,QAAA,IAAI,CAAC,CAAC,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC;QACvB,IAAI,CAAC,CAAC,GAAG,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;QAC3B,IAAI,CAAC,CAAC,GAAG,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;AAE3B,QAAA,OAAO,IAAI,CAAC;KAEf;AAEM,IAAA,cAAc,CAAC,CAAU,EAAA;QAE5B,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;AAExB,QAAA,OAAO,IAAI,CAAC;KAEf;AAEM,IAAA,GAAG,CAAC,KAAc,EAAA;AAErB,QAAA,IAAI,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC;AAClB,QAAA,IAAI,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC;AAClB,QAAA,IAAI,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC;AAElB,QAAA,OAAO,IAAI,CAAC;KAEf;AAEM,IAAA,GAAG,CAAC,CAAU,EAAA;QAEjB,OAAO,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;KAEnC;IAEM,UAAU,CAAC,CAAU,EAAE,CAAU,EAAA;QAEpC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QACnB,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QACnB,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AAEnB,QAAA,OAAO,IAAI,CAAC;KAEf;AAEM,IAAA,cAAc,CAAC,MAAc,EAAA;AAEhC,QAAA,IAAI,CAAC,CAAC,IAAI,MAAM,CAAC;AACjB,QAAA,IAAI,CAAC,CAAC,IAAI,MAAM,CAAC;AACjB,QAAA,IAAI,CAAC,CAAC,IAAI,MAAM,CAAC;AAEjB,QAAA,OAAO,IAAI,CAAC;KAEf;AAEM,IAAA,YAAY,CAAC,CAAU,EAAA;AAE1B,QAAA,MAAM,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;AACjB,QAAA,MAAM,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;AACjB,QAAA,MAAM,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;AAEjB,QAAA,MAAM,EAAE,GAAG,CAAC,CAAC,QAAQ,CAAC;QAEtB,IAAI,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;QAC3C,IAAI,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;QAC3C,IAAI,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;AAE3C,QAAA,OAAO,IAAI,CAAC;KAEf;AAEM,IAAA,YAAY,CAAC,CAAU,EAAA;AAE1B,QAAA,MAAM,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;AACjB,QAAA,MAAM,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;AACjB,QAAA,MAAM,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;AACjB,QAAA,MAAM,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC;AAErB,QAAA,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AAExD,QAAA,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;AACtD,QAAA,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;AACtD,QAAA,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;AAEvD,QAAA,OAAO,IAAI,CAAC;KAEf;AAEM,IAAA,MAAM,CAAC,CAAU,EAAA;QAEpB,OAAO,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,CAAC,CAAC;KAE7D;IAEM,YAAY,CAAC,CAAU,EAAE,CAAU,EAAA;AAEtC,QAAA,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AAC/B,QAAA,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AAC/B,QAAA,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AAE/B,QAAA,OAAO,IAAI,CAAC;KACf;IAEM,QAAQ,GAAA;QAEX,OAAO,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;KAE9D;IAEM,MAAM,GAAA;QAET,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;KAErC;IAEM,SAAS,GAAA;AAEZ,QAAA,OAAO,IAAI,CAAC,cAAc,CAAC,CAAC,IAAI,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC;KAExD;AAEM,IAAA,UAAU,CAAC,CAAU,EAAA;QAExB,MAAM,EAAE,GAAG,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QACxB,MAAM,EAAE,GAAG,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QACxB,MAAM,EAAE,GAAG,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AAExB,QAAA,OAAO,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;KAEjD;AAEJ;;kBC5KD,MAAM,SAAS,CAAA;AAEJ,IAAA,OAAgB,EAAE,GAAG,IAAI,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAC1C,IAAA,OAAgB,CAAC,GAAG,IAAI,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AACzC,IAAA,OAAgB,CAAC,GAAG,IAAI,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AACzC,IAAA,OAAgB,CAAC,GAAG,IAAI,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;;MAIvC,OAAO,CAAA;AAII,IAAA,QAAA,CAAA;AAFpB,IAAA,WAAA,CAEoB,QAAW,GAAA;AAEvB,QAAA,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;AACV,QAAA,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;AACV,QAAA,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;AACV,QAAA,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;AAEb,KAAA,EAAA;QAPe,IAAQ,CAAA,QAAA,GAAR,QAAQ,CAOvB;KAEA;AAEE,IAAA,GAAG,CAEN,GAAW,EAAE,GAAW,EAAE,GAAW,EAAE,GAAW,EAClD,GAAW,EAAE,GAAW,EAAE,GAAW,EAAE,GAAW,EAClD,GAAW,EAAE,GAAW,EAAE,GAAW,EAAE,GAAW,EAClD,GAAW,EAAE,GAAW,EAAE,GAAW,EAAE,GAAW,EAAA;AAIlD,QAAA,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;AACvB,QAAA,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;AACvB,QAAA,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;AACvB,QAAA,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;AAEvB,QAAA,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;AACvB,QAAA,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;AACvB,QAAA,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;AACvB,QAAA,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;AAEvB,QAAA,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;AACvB,QAAA,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;AACvB,QAAA,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC;AACxB,QAAA,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC;AAExB,QAAA,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC;AACxB,QAAA,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC;AACxB,QAAA,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC;AACxB,QAAA,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC;AAExB,QAAA,OAAO,IAAI,CAAC;KAEf;AAEM,IAAA,IAAI,CAAC,CAAU,EAAA;AAElB,QAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC;QACzB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC,CAAC;AAElC,QAAA,OAAO,IAAI,CAAC;KAEf;AAEM,IAAA,QAAQ,CAAC,KAAc,EAAA;QAE1B,OAAO,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;KAE7C;IAEM,gBAAgB,CAAC,IAAa,EAAE,KAAc,EAAA;QAIjD,MAAM,EAAE,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC;QACjC,MAAM,EAAE,GAAG,KAAK,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC;QAElC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;QAClF,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;QAClF,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;QACnF,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;QAEnF,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;QAClF,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;QAClF,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;QACnF,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;QAEnF,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;QACpF,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;QACpF,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;QACtF,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;QAEtF,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;QACvF,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;QACvF,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;QACxF,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;AAExF,QAAA,OAAO,IAAI,CAAC;KAEf;AAEM,IAAA,OAAO,CAAC,QAAiB,EAAE,QAAoB,EAAE,KAAc,EAAA;AAUlE,QAAA,MAAM,EAAE,GAAG,IAAI,CAAC,QAAQ,CAAC;AAEzB,QAAA,MAAM,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC;AACrB,QAAA,MAAM,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC;AACrB,QAAA,MAAM,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC;AACrB,QAAA,MAAM,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC;AAErB,QAAA,MAAM,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC;AACjB,QAAA,MAAM,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC;AACjB,QAAA,MAAM,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC;AAEjB,QAAA,MAAM,EAAE,GAAG,CAAC,GAAG,EAAE,CAAC;AAClB,QAAA,MAAM,EAAE,GAAG,CAAC,GAAG,EAAE,CAAC;AAClB,QAAA,MAAM,EAAE,GAAG,CAAC,GAAG,EAAE,CAAC;AAClB,QAAA,MAAM,EAAE,GAAG,CAAC,GAAG,EAAE,CAAC;AAClB,QAAA,MAAM,EAAE,GAAG,CAAC,GAAG,EAAE,CAAC;AAClB,QAAA,MAAM,EAAE,GAAG,CAAC,GAAG,EAAE,CAAC;AAClB,QAAA,MAAM,EAAE,GAAG,CAAC,GAAG,EAAE,CAAC;AAClB,QAAA,MAAM,EAAE,GAAG,CAAC,GAAG,EAAE,CAAC;AAClB,QAAA,MAAM,EAAE,GAAG,CAAC,GAAG,EAAE,CAAC;AAElB,QAAA,MAAM,EAAE,GAAG,KAAK,CAAC,CAAC,CAAC;AACnB,QAAA,MAAM,EAAE,GAAG,KAAK,CAAC,CAAC,CAAC;AACnB,QAAA,MAAM,EAAE,GAAG,KAAK,CAAC,CAAC,CAAC;AAEnB,QAAA,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,GAAG,EAAE,CAAC,IAAI,EAAE,CAAC;QAC7B,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC;QACvB,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC;AACvB,QAAA,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;QAEV,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC;AACvB,QAAA,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,GAAG,EAAE,CAAC,IAAI,EAAE,CAAC;QAC7B,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC;AACvB,QAAA,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;QAEV,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC;QACvB,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC;AACvB,QAAA,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,GAAG,EAAE,CAAC,IAAI,EAAE,CAAC;AAC9B,QAAA,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC;AAEX,QAAA,EAAE,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC;AACpB,QAAA,EAAE,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC;AACpB,QAAA,EAAE,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC;AACpB,QAAA,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC;AAEX,QAAA,OAAO,IAAI,CAAC;KAEf;IAEM,MAAM,GAAA;AAcT,QAAA,MAAM,EAAE,GAAG,IAAI,CAAC,QAAQ,CAAC;QAEzB,MAAM,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC,EAAE,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC,EAAE,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC,EAAE,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;QACzD,MAAM,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC,EAAE,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC,EAAE,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC,EAAE,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;QACzD,MAAM,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC,EAAE,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC,EAAE,GAAG,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;QAC3D,MAAM,GAAG,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;AAE7D,QAAA,MAAM,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;AACtH,QAAA,MAAM,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;AACtH,QAAA,MAAM,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;AACtH,QAAA,MAAM,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;AAEtH,QAAA,MAAM,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;QAE1D,IAAI,GAAG,KAAK,CAAC;AAAE,YAAA,OAAO,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAE/E,QAAA,MAAM,MAAM,GAAG,CAAC,GAAG,GAAG,CAAC;AAEvB,QAAA,EAAE,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,MAAM,CAAC;AACrB,QAAA,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,MAAM,CAAC;AAC7H,QAAA,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,MAAM,CAAC;AAC7H,QAAA,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,MAAM,CAAC;AAE7H,QAAA,EAAE,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,MAAM,CAAC;AACrB,QAAA,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,MAAM,CAAC;AAC7H,QAAA,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,MAAM,CAAC;AAC7H,QAAA,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,MAAM,CAAC;AAE7H,QAAA,EAAE,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,MAAM,CAAC;AACrB,QAAA,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,MAAM,CAAC;AAC7H,QAAA,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,MAAM,CAAC;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"}